function multiplyMatrices(e,$){let t=e.length;Array.isArray(e[0])||(e=[e]),Array.isArray($[0])||($=$.map(e=>[e]));let r=$[0].length,o=$[0].map((e,t)=>$.map(e=>e[t])),_=e.map(e=>o.map($=>{let t=0;if(!Array.isArray(e)){for(let r of $)t+=e*r;return t}for(let o=0;o<e.length;o++)t+=e[o]*($[o]||0);return t}));return(1===t&&(_=_[0]),1===r)?_.map(e=>e[0]):_}function isString(e){return"string"===type(e)}function type(e){return(Object.prototype.toString.call(e).match(/^\[object\s+(.*?)\]$/)[1]||"").toLowerCase()}function toPrecision(e,$){$=+$;let t=(Math.floor(e=+e)+"").length;if($>t)return+e.toFixed($-t);{let r=10**(t-$);return Math.round(e/r)*r}}function parseFunction(e){if(!e)return;e=e.trim();let $=/^-?[\d.]+$/,t=e.match(/^([a-z]+)\((.+?)\)$/i);if(t){let r=[];return t[2].replace(/\/?\s*([-\w.]+(?:%|deg)?)/g,(e,t)=>{/%$/.test(t)?(t=new Number(t.slice(0,-1)/100)).type="<percentage>":/deg$/.test(t)?((t=new Number(+t.slice(0,-3))).type="<angle>",t.unit="deg"):$.test(t)&&((t=new Number(t)).type="<number>"),e.startsWith("/")&&((t=t instanceof Number?t:new Number(t)).alpha=!0),r.push(t)}),{name:t[1].toLowerCase(),rawName:t[1],rawArgs:t[2],args:r}}}function last(e){return e[e.length-1]}function interpolate(e,$,t){return isNaN(e)?$:isNaN($)?e:e+($-e)*t}function interpolateInv(e,$,t){return(t-e)/($-e)}function mapRange(e,$,t){return interpolate($[0],$[1],interpolateInv(e[0],e[1],t))}function parseCoordGrammar(e){return e.map(e=>e.split("|").map(e=>{let $=(e=e.trim()).match(/^(<[a-z]+>)\[(-?[.\d]+),\s*(-?[.\d]+)\]?$/);if($){let t=new String($[1]);return t.range=[+$[2],+$[3]],t}return e}))}var util=Object.freeze({__proto__:null,isString:isString,type:type,toPrecision:toPrecision,parseFunction:parseFunction,last:last,interpolate:interpolate,interpolateInv:interpolateInv,mapRange:mapRange,parseCoordGrammar:parseCoordGrammar,multiplyMatrices:multiplyMatrices});class Hooks{add(e,$,t){if("string"!=typeof arguments[0]){for(var e in arguments[0])this.add(e,arguments[0][e],arguments[1]);return}(Array.isArray(e)?e:[e]).forEach(function(e){this[e]=this[e]||[],$&&this[e][t?"unshift":"push"]($)},this)}run(e,$){this[e]=this[e]||[],this[e].forEach(function(e){e.call($&&$.context?$.context:$,$)})}}let hooks=new Hooks;var defaults={gamut_mapping:"lch.c",precision:5,deltaE:"76"};let WHITES={D50:[.3457/.3585,1,.8251046025104602],D65:[.3127/.329,1,1.0890577507598784]};function getWhite(e){return Array.isArray(e)?e:WHITES[e]}function adapt$1(e,$,t,r={}){if(e=getWhite(e),$=getWhite($),!e||!$)throw TypeError(`Missing white point to convert ${e?"":"from"}${e||$?"":"/"}${$?"":"to"}`);if(e===$)return t;let o={W1:e,W2:$,XYZ:t,options:r};if(hooks.run("chromatic-adaptation-start",o),o.M||(o.W1===WHITES.D65&&o.W2===WHITES.D50?o.M=[[1.0479298208405488,.022946793341019088,-.05019222954313557],[.029627815688159344,.990434484573249,-.01707382502938514],[-.009243058152591178,.015055144896577895,.7518742899580008]]:o.W1!==WHITES.D50||o.W2!==WHITES.D65||(o.M=[[.9554734527042182,-.023098536874261423,.0632593086610217],[-.028369706963208136,1.0099954580058226,.021041398966943008],[.012314001688319899,-.020507696433477912,1.3303659366080753]])),hooks.run("chromatic-adaptation-end",o),o.M)return multiplyMatrices(o.M,o.XYZ);throw TypeError("Only Bradford CAT with white points D50 and D65 supported for now.")}let ε$4=75e-6;class ColorSpace{constructor(e){this.id=e.id,this.name=e.name,this.base=e.base?ColorSpace.get(e.base):null,this.aliases=e.aliases,this.base&&(this.fromBase=e.fromBase,this.toBase=e.toBase);let $=e.coords??this.base.coords;this.coords=$;let t=e.white??this.base.white??"D65";for(let r in this.white=getWhite(t),this.formats=e.formats??{},this.formats){let o=this.formats[r];o.type||="function",o.name||=r}e.cssId&&!this.formats.functions?.color?(this.formats.color={id:e.cssId},Object.defineProperty(this,"cssId",{value:e.cssId})):this.formats?.color&&!this.formats?.color.id&&(this.formats.color.id=this.id),this.referred=e.referred,this.#a=this.#b().reverse(),hooks.run("colorspace-init-end",this)}inGamut(e,{epsilon:$=75e-6}={}){if(this.isPolar)return e=this.toBase(e),this.base.inGamut(e,{epsilon:$});let t=Object.values(this.coords);return e.every((e,r)=>{let o=t[r];if("angle"!==o.type&&o.range){if(Number.isNaN(e))return!0;let[_,s]=o.range;return(void 0===_||e>=_-$)&&(void 0===s||e<=s+$)}return!0})}get cssId(){return this.formats.functions?.color?.id||this.id}get isPolar(){for(let e in this.coords)if("angle"===this.coords[e].type)return!0;return!1}#c(e){if(e.coords&&!e.coordGrammar){e.type||="function",e.name||="color",e.coordGrammar=parseCoordGrammar(e.coords);let $=Object.entries(this.coords).map(([$,t],r)=>{let o=e.coordGrammar[r][0],_=t.range||t.refRange,s=o.range,l="";return"<percentage>"==o?(s=[0,100],l="%"):"<angle>"==o&&(l="deg"),{fromRange:_,toRange:s,suffix:l}});e.serializeCoords=(e,t)=>e.map((e,r)=>{let{fromRange:o,toRange:_,suffix:s}=$[r];return o&&_&&(e=mapRange(o,_,e)),e=toPrecision(e,t),s&&(e+=s),e})}return e}getFormat(e){if("object"==typeof e)return e=this.#c(e);let $;return($="default"===e?Object.values(this.formats)[0]:this.formats[e])?$=this.#c($):null}#a;#b(){let t=[this];for(let r=this;r=r.base;)t.push(r);return t}to(e,$){if(1===arguments.length&&([e,$]=[e.space,e.coords]),this===(e=ColorSpace.get(e)))return $;$=$.map(e=>Number.isNaN(e)?0:e);let t=this.#a,r=e.#a,o,_;for(let s=0;s<t.length;s++)if(t[s]===r[s])o=t[s],_=s;else break;if(!o)throw Error(`Cannot convert between color spaces ${this} and ${e}: no connection space was found`);for(let l=t.length-1;l>_;l--)$=t[l].toBase($);for(let i=_+1;i<r.length;i++)$=r[i].fromBase($);return $}from(e,$){return 1===arguments.length&&([e,$]=[e.space,e.coords]),(e=ColorSpace.get(e)).to(this,$)}toString(){return`${this.name} (${this.id})`}getMinCoords(){let e=[];for(let $ in this.coords){let t=this.coords[$],r=t.range||t.refRange;e.push(r?.min??0)}return e}static registry={};static get all(){return[...new Set(Object.values(ColorSpace.registry))]}static register(e,$){if(1===arguments.length&&($=arguments[0],e=$.id),$=this.get($),this.registry[e]&&this.registry[e]!==$)throw Error(`Duplicate color space registration: '${e}'`);if(this.registry[e]=$,1===arguments.length&&$.aliases)for(let t of $.aliases)this.register(t,$);return $}static get(e,...$){if(!e||e instanceof ColorSpace)return e;if("string"===type(e)){let t=ColorSpace.registry[e.toLowerCase()];if(!t)throw TypeError(`No color space found with id = "${e}"`);return t}if($.length)return ColorSpace.get(...$);throw TypeError(`${e} is not a valid color space`)}static resolveCoord(e,$){let t=type(e),r,o;if("string"===t?e.includes(".")?[r,o]=e.split("."):[r,o]=[,e]:Array.isArray(e)?[r,o]=e:(r=e.space,o=e.coordId),(r=ColorSpace.get(r))||(r=$),!r)throw TypeError(`Cannot resolve coordinate reference ${e}: No color space specified and relative references are not allowed here`);if("number"===(t=type(o))||"string"===t&&o>=0){let _=Object.entries(r.coords)[o];if(_)return{space:r,id:_[0],index:o,..._[1]}}r=ColorSpace.get(r);let s=o.toLowerCase(),l=0;for(let i in r.coords){let u=r.coords[i];if(i.toLowerCase()===s||u.name?.toLowerCase()===s)return{space:r,id:i,index:l,...u};l++}throw TypeError(`No "${o}" coordinate found in ${r.name}. Its coordinates are: ${Object.keys(r.coords).join(", ")}`)}static DEFAULT_FORMAT={type:"functions",name:"color"}}var XYZ_D65=new ColorSpace({id:"xyz-d65",name:"XYZ D65",coords:{x:{name:"X"},y:{name:"Y"},z:{name:"Z"}},white:"D65",formats:{color:{ids:["xyz-d65","xyz"]}},aliases:["xyz"]});class RGBColorSpace extends ColorSpace{constructor(e){e.coords||(e.coords={r:{range:[0,1],name:"Red"},g:{range:[0,1],name:"Green"},b:{range:[0,1],name:"Blue"}}),e.base||(e.base=XYZ_D65),e.toXYZ_M&&e.fromXYZ_M&&(e.toBase??=$=>{let t=multiplyMatrices(e.toXYZ_M,$);return this.white!==this.base.white&&(t=adapt$1(this.white,this.base.white,t)),t},e.fromBase??=$=>($=adapt$1(this.base.white,this.white,$),multiplyMatrices(e.fromXYZ_M,$))),e.referred??="display",super(e)}}function parse(e){let $={str:String(e)?.trim()};if(hooks.run("parse-start",$),$.color)return $.color;if($.parsed=parseFunction($.str),$.parsed){let t=$.parsed.name;if("color"===t){let r=$.parsed.args.shift(),o=$.parsed.rawArgs.indexOf("/")>0?$.parsed.args.pop():1;for(let _ of ColorSpace.all){let s=_.getFormat("color");if(s&&(r===s.id||s.ids?.includes(r))){let l=Array(Object.keys(_.coords).length).fill(0);return l.forEach((e,t)=>l[t]=$.parsed.args[t]||0),{spaceId:_.id,coords:l,alpha:o}}}let i="";if(r in ColorSpace.registry){let u=ColorSpace.registry[r].formats?.functions?.color?.id;u&&(i=`Did you mean color(${u})?`)}throw TypeError(`Cannot parse color(${r}). `+(i||"Missing a plugin?"))}for(let f of ColorSpace.all){let h=f.getFormat(t);if(h&&"function"===h.type){let C=1;(h.lastAlpha||last($.parsed.args).alpha)&&(C=$.parsed.args.pop());let y=$.parsed.args;return h.coordGrammar&&Object.entries(f.coords).forEach(([e,$],r)=>{let o=h.coordGrammar[r],_=y[r]?.type;if(!(o=o.find(e=>e==_)))throw TypeError(`${_} not allowed for ${$.name||e} in ${t}()`);let s=o.range;"<percentage>"===_&&(s||=[0,1]);let l=$.range||$.refRange;s&&l&&(y[r]=mapRange(s,l,y[r]))}),{spaceId:f.id,coords:y,alpha:C}}}}else for(let w of ColorSpace.all)for(let S in w.formats){let M=w.formats[S];if("custom"!==M.type||M.test&&!M.test($.str))continue;let L=M.parse($.str);if(L)return L.alpha??=1,L}throw TypeError(`Could not parse ${e} as a color. Missing a plugin?`)}function getColor(e){if(!e)throw TypeError("Empty color reference");isString(e)&&(e=parse(e));let $=e.space||e.spaceId;return $ instanceof ColorSpace||(e.space=ColorSpace.get($)),void 0===e.alpha&&(e.alpha=1),e}function getAll(e,$){return($=ColorSpace.get($)).from(e)}function get(e,$){let{space:t,index:r}=ColorSpace.resolveCoord($,e.space);return getAll(e,t)[r]}function setAll(e,$,t){return $=ColorSpace.get($),e.coords=$.to(e.space,t),e}function set$1(e,$,t){if(e=getColor(e),2===arguments.length&&"object"===type(arguments[1])){let r=arguments[1];for(let o in r)set$1(e,o,r[o])}else{"function"==typeof t&&(t=t(get(e,$)));let{space:_,index:s}=ColorSpace.resolveCoord($,e.space),l=getAll(e,_);l[s]=t,setAll(e,_,l)}return e}var XYZ_D50=new ColorSpace({id:"xyz-d50",name:"XYZ D50",white:"D50",base:XYZ_D65,fromBase:e=>adapt$1(XYZ_D65.white,"D50",e),toBase:e=>adapt$1("D50",XYZ_D65.white,e),formats:{color:{}}});let ε$3=216/24389,ε3$1=24/116,κ$1=24389/27,white$1=WHITES.D50;var lab=new ColorSpace({id:"lab",name:"Lab",coords:{l:{refRange:[0,100],name:"L"},a:{refRange:[-125,125]},b:{refRange:[-125,125]}},white:white$1,base:XYZ_D50,fromBase(e){let $=e.map((e,$)=>e/white$1[$]).map(e=>e>ε$3?Math.cbrt(e):(κ$1*e+16)/116);return[116*$[1]-16,500*($[0]-$[1]),200*($[1]-$[2])]},toBase(e){let $=[];return $[1]=(e[0]+16)/116,$[0]=e[1]/500+$[1],$[2]=$[1]-e[2]/200,[$[0]>ε3$1?Math.pow($[0],3):(116*$[0]-16)/κ$1,e[0]>8?Math.pow((e[0]+16)/116,3):e[0]/κ$1,$[2]>ε3$1?Math.pow($[2],3):(116*$[2]-16)/κ$1].map((e,$)=>e*white$1[$])},formats:{lab:{coords:["<percentage> | <number>","<number>","<number>"]}}});function constrain(e){return(e%360+360)%360}function adjust(e,$){if("raw"===e)return $;let[t,r]=$.map(constrain),o=r-t;return"increasing"===e?o<0&&(r+=360):"decreasing"===e?o>0&&(t+=360):"longer"===e?-180<o&&o<180&&(o>0?r+=360:t+=360):"shorter"===e&&(o>180?t+=360:o<-180&&(r+=360)),[t,r]}var lch=new ColorSpace({id:"lch",name:"LCH",coords:{l:{refRange:[0,100],name:"Lightness"},c:{refRange:[0,150],name:"Chroma"},h:{refRange:[0,360],type:"angle",name:"Hue"}},base:lab,fromBase(e){let[$,t,r]=e,o;return o=.02>Math.abs(t)&&.02>Math.abs(r)?NaN:180*Math.atan2(r,t)/Math.PI,[$,Math.sqrt(t**2+r**2),constrain(o)]},toBase(e){let[$,t,r]=e;return t<0&&(t=0),isNaN(r)&&(r=0),[$,t*Math.cos(r*Math.PI/180),t*Math.sin(r*Math.PI/180)]},formats:{lch:{coords:["<percentage> | <number>","<number>","<number> | <angle>"]}}});let Gfactor=6103515625,π$1=Math.PI,r2d=180/π$1,d2r$1=π$1/180;function deltaE2000(e,$,{kL:t=1,kC:r=1,kH:o=1}={}){let[_,s,l]=lab.from(e),i=lch.from(lab,[_,s,l])[1],[u,f,h]=lab.from($),C=lch.from(lab,[u,f,h])[1];i<0&&(i=0),C<0&&(C=0);let y=((i+C)/2)**7,w=.5*(1-Math.sqrt(y/(y+6103515625))),S=(1+w)*s,M=(1+w)*f,L=Math.sqrt(S**2+l**2),R=Math.sqrt(M**2+h**2),v=0===S&&0===l?0:Math.atan2(l,S),B=0===M&&0===h?0:Math.atan2(h,M);v<0&&(v+=2*π$1),B<0&&(B+=2*π$1),v*=r2d;let E=R-L,z=(B*=r2d)-v,Y=v+B,A=Math.abs(z),X;L*R==0?X=0:A<=180?X=z:z>180?X=z-360:z<-180?X=z+360:console.log("the unthinkable has happened");let Z=2*Math.sqrt(R*L)*Math.sin(X*d2r$1/2),G=(L+R)/2,k=Math.pow(G,7),P,D=((_+u)/2-50)**2,I=1+.045*G,x=1;x-=.17*Math.cos(((P=L*R==0?Y:A<=180?Y/2:Y<360?(Y+360)/2:(Y-360)/2)-30)*d2r$1),x+=.24*Math.cos(2*P*d2r$1),x+=.32*Math.cos((3*P+6)*d2r$1);let T=1+.015*G*(x-=.2*Math.cos((4*P-63)*d2r$1)),H=30*Math.exp(-1*((P-275)/25)**2),W=((u-_)/(t*(1+.015*D/Math.sqrt(20+D))))**2;return W+=(E/(r*I))**2,W+=(Z/(o*T))**2,Math.sqrt(W+=-1*Math.sin(2*H*d2r$1)*(2*Math.sqrt(k/(k+6103515625)))*(E/(r*I))*(Z/(o*T)))}let ε$2=75e-6;function inGamut(e,$=e.space,{epsilon:t=75e-6}={}){e=getColor(e),$=ColorSpace.get($);let r=e.coords;return $!==e.space&&(r=$.from(e)),$.inGamut(r,{epsilon:t})}function clone(e){return{space:e.space,coords:e.coords.slice(),alpha:e.alpha}}function toGamut(e,{method:$=defaults.gamut_mapping,space:t=e.space}={}){if(isString(arguments[1])&&(t=arguments[1]),t=ColorSpace.get(t),inGamut(e,t,{epsilon:0}))return e;let r=to(e,t);if("clip"!==$&&!inGamut(e,t)){let o=toGamut(clone(r),{method:"clip",space:t});if(deltaE2000(e,o)>2){let _=ColorSpace.resolveCoord($),s=_.space,l=_.id,i=to(r,s),u,f=(_.range||_.refRange)[0],h=get(i,l);for(;h-f>.01;){let C=clone(i);C=toGamut(C,{space:t,method:"clip"}),deltaE2000(i,C)-2<.01?f=get(i,l):h=get(i,l),set$1(i,l,(f+h)/2)}r=to(i,t)}else r=o}if("clip"===$||!inGamut(r,t,{epsilon:0})){let y=Object.values(t.coords).map(e=>e.range||[]);r.coords=r.coords.map((e,$)=>{let[t,r]=y[$];return void 0!==t&&(e=Math.max(t,e)),void 0!==r&&(e=Math.min(e,r)),e})}return t!==e.space&&(r=to(r,e.space)),e.coords=r.coords,e}function to(e,$,{inGamut:t}={}){e=getColor(e);let r=($=ColorSpace.get($)).from(e),o={space:$,coords:r,alpha:e.alpha};return t&&(o=toGamut(o)),o}function serialize(e,{precision:$=defaults.precision,format:t="default",inGamut:r=!0,...o}={}){let _;e=getColor(e);let s=t;r||=(t=e.space.getFormat(t)??e.space.getFormat("default")??ColorSpace.DEFAULT_FORMAT).toGamut;let l=e.coords;if(l=l.map(e=>e||0),r&&!inGamut(e)&&(l=toGamut(clone(e),!0===r?void 0:r).coords),"custom"===t.type){if(o.precision=$,t.serialize)_=t.serialize(l,e.alpha,o);else throw TypeError(`format ${s} can only be used to parse colors, not for serialization`)}else{let i=t.name||"color";t.serializeCoords?l=t.serializeCoords(l,$):null!==$&&(l=l.map(e=>toPrecision(e,$)));let u=[...l];if("color"===i){let f=t.id||t.ids?.[0]||e.space.id;u.unshift(f)}let h=e.alpha;null!==$&&(h=toPrecision(h,$)),_=`${i}(${u.join(t.commas?", ":" ")}${e.alpha<1?` ${t.commas?",":"/"} ${h}`:""})`}return _}toGamut.returns="color",to.returns="color";let toXYZ_M$5=[[.6369580483012914,.14461690358620832,.1688809751641721],[.2627002120112671,.6779980715188708,.05930171646986196],[0,.028072693049087428,1.060985057710791]],fromXYZ_M$5=[[1.716651187971268,-.355670783776392,-.25336628137366],[-.666684351832489,1.616481236634939,.0157685458139111],[.017639857445311,-.042770613257809,.942103121235474]];var REC2020Linear=new RGBColorSpace({id:"rec2020-linear",name:"Linear REC.2020",white:"D65",toXYZ_M:toXYZ_M$5,fromXYZ_M:fromXYZ_M$5});let α=1.09929682680944,β=.018053968510807;var REC2020=new RGBColorSpace({id:"rec2020",name:"REC.2020",base:REC2020Linear,toBase:e=>e.map(function(e){return e<.08124285829863151?e/4.5:Math.pow((e+1.09929682680944-1)/1.09929682680944,1/.45)}),fromBase:e=>e.map(function(e){return e>=.018053968510807?1.09929682680944*Math.pow(e,.45)-(1.09929682680944-1):4.5*e}),formats:{color:{}}});let toXYZ_M$4=[[.4865709486482162,.26566769316909306,.1982172852343625],[.2289745640697488,.6917385218365064,.079286914093745],[0,.04511338185890264,1.043944368900976]],fromXYZ_M$4=[[2.493496911941425,-.9313836179191239,-.40271078445071684],[-.8294889695615747,1.7626640603183463,.023624685841943577],[.03584583024378447,-.07617238926804182,.9568845240076872]];var P3Linear=new RGBColorSpace({id:"p3-linear",name:"Linear P3",white:"D65",toXYZ_M:toXYZ_M$4,fromXYZ_M:fromXYZ_M$4});let toXYZ_M$3=[[.41239079926595934,.357584339383878,.1804807884018343],[.21263900587151027,.715168678767756,.07219231536073371],[.01933081871559182,.11919477979462598,.9505321522496607]],fromXYZ_M$3=[[3.2409699419045226,-1.537383177570094,-.4986107602930034],[-.9692436362808796,1.8759675015077202,.04155505740717559],[.05563007969699366,-.20397695888897652,1.0569715142428786]];var sRGBLinear=new RGBColorSpace({id:"srgb-linear",name:"Linear sRGB",white:"D65",toXYZ_M:toXYZ_M$3,fromXYZ_M:fromXYZ_M$3,formats:{color:{}}}),KEYWORDS={aliceblue:[240/255,248/255,1],antiquewhite:[250/255,235/255,215/255],aqua:[0,1,1],aquamarine:[127/255,1,212/255],azure:[240/255,1,1],beige:[245/255,245/255,220/255],bisque:[1,228/255,196/255],black:[0,0,0],blanchedalmond:[1,235/255,205/255],blue:[0,0,1],blueviolet:[138/255,43/255,226/255],brown:[165/255,42/255,42/255],burlywood:[222/255,184/255,135/255],cadetblue:[95/255,158/255,160/255],chartreuse:[127/255,1,0],chocolate:[210/255,105/255,30/255],coral:[1,127/255,80/255],cornflowerblue:[100/255,149/255,237/255],cornsilk:[1,248/255,220/255],crimson:[220/255,20/255,60/255],cyan:[0,1,1],darkblue:[0,0,139/255],darkcyan:[0,139/255,139/255],darkgoldenrod:[184/255,134/255,11/255],darkgray:[169/255,169/255,169/255],darkgreen:[0,100/255,0],darkgrey:[169/255,169/255,169/255],darkkhaki:[189/255,183/255,107/255],darkmagenta:[139/255,0,139/255],darkolivegreen:[85/255,107/255,47/255],darkorange:[1,140/255,0],darkorchid:[.6,50/255,.8],darkred:[139/255,0,0],darksalmon:[233/255,150/255,122/255],darkseagreen:[143/255,188/255,143/255],darkslateblue:[72/255,61/255,139/255],darkslategray:[47/255,79/255,79/255],darkslategrey:[47/255,79/255,79/255],darkturquoise:[0,206/255,209/255],darkviolet:[148/255,0,211/255],deeppink:[1,20/255,147/255],deepskyblue:[0,191/255,1],dimgray:[105/255,105/255,105/255],dimgrey:[105/255,105/255,105/255],dodgerblue:[30/255,144/255,1],firebrick:[178/255,34/255,34/255],floralwhite:[1,250/255,240/255],forestgreen:[34/255,139/255,34/255],fuchsia:[1,0,1],gainsboro:[220/255,220/255,220/255],ghostwhite:[248/255,248/255,1],gold:[1,215/255,0],goldenrod:[218/255,165/255,32/255],gray:[128/255,128/255,128/255],green:[0,128/255,0],greenyellow:[173/255,1,47/255],grey:[128/255,128/255,128/255],honeydew:[240/255,1,240/255],hotpink:[1,105/255,180/255],indianred:[205/255,92/255,92/255],indigo:[75/255,0,130/255],ivory:[1,1,240/255],khaki:[240/255,230/255,140/255],lavender:[230/255,230/255,250/255],lavenderblush:[1,240/255,245/255],lawngreen:[124/255,252/255,0],lemonchiffon:[1,250/255,205/255],lightblue:[173/255,216/255,230/255],lightcoral:[240/255,128/255,128/255],lightcyan:[224/255,1,1],lightgoldenrodyellow:[250/255,250/255,210/255],lightgray:[211/255,211/255,211/255],lightgreen:[144/255,238/255,144/255],lightgrey:[211/255,211/255,211/255],lightpink:[1,182/255,193/255],lightsalmon:[1,160/255,122/255],lightseagreen:[32/255,178/255,170/255],lightskyblue:[135/255,206/255,250/255],lightslategray:[119/255,136/255,.6],lightslategrey:[119/255,136/255,.6],lightsteelblue:[176/255,196/255,222/255],lightyellow:[1,1,224/255],lime:[0,1,0],limegreen:[50/255,205/255,50/255],linen:[250/255,240/255,230/255],magenta:[1,0,1],maroon:[128/255,0,0],mediumaquamarine:[.4,205/255,170/255],mediumblue:[0,0,205/255],mediumorchid:[186/255,85/255,211/255],mediumpurple:[147/255,112/255,219/255],mediumseagreen:[60/255,179/255,113/255],mediumslateblue:[123/255,104/255,238/255],mediumspringgreen:[0,250/255,154/255],mediumturquoise:[72/255,209/255,.8],mediumvioletred:[199/255,21/255,133/255],midnightblue:[25/255,25/255,112/255],mintcream:[245/255,1,250/255],mistyrose:[1,228/255,225/255],moccasin:[1,228/255,181/255],navajowhite:[1,222/255,173/255],navy:[0,0,128/255],oldlace:[253/255,245/255,230/255],olive:[128/255,128/255,0],olivedrab:[107/255,142/255,35/255],orange:[1,165/255,0],orangered:[1,69/255,0],orchid:[218/255,112/255,214/255],palegoldenrod:[238/255,232/255,170/255],palegreen:[152/255,251/255,152/255],paleturquoise:[175/255,238/255,238/255],palevioletred:[219/255,112/255,147/255],papayawhip:[1,239/255,213/255],peachpuff:[1,218/255,185/255],peru:[205/255,133/255,63/255],pink:[1,192/255,203/255],plum:[221/255,160/255,221/255],powderblue:[176/255,224/255,230/255],purple:[128/255,0,128/255],rebeccapurple:[.4,.2,.6],red:[1,0,0],rosybrown:[188/255,143/255,143/255],royalblue:[65/255,105/255,225/255],saddlebrown:[139/255,69/255,19/255],salmon:[250/255,128/255,114/255],sandybrown:[244/255,164/255,96/255],seagreen:[46/255,139/255,87/255],seashell:[1,245/255,238/255],sienna:[160/255,82/255,45/255],silver:[192/255,192/255,192/255],skyblue:[135/255,206/255,235/255],slateblue:[106/255,90/255,205/255],slategray:[112/255,128/255,144/255],slategrey:[112/255,128/255,144/255],snow:[1,250/255,250/255],springgreen:[0,1,127/255],steelblue:[70/255,130/255,180/255],tan:[210/255,180/255,140/255],teal:[0,128/255,128/255],thistle:[216/255,191/255,216/255],tomato:[1,99/255,71/255],turquoise:[64/255,224/255,208/255],violet:[238/255,130/255,238/255],wheat:[245/255,222/255,179/255],white:[1,1,1],whitesmoke:[245/255,245/255,245/255],yellow:[1,1,0],yellowgreen:[154/255,205/255,50/255]};let coordGrammar=[,,,].fill("<percentage> | <number>[0, 255]");var sRGB=new RGBColorSpace({id:"srgb",name:"sRGB",base:sRGBLinear,fromBase:e=>e.map(e=>{let $=e<0?-1:1,t=e*$;return t>.0031308?$*(1.055*t**(1/2.4)-.055):12.92*e}),toBase:e=>e.map(e=>{let $=e<0?-1:1,t=e*$;return t<.04045?e/12.92:$*((t+.055)/1.055)**2.4}),formats:{rgb:{coords:coordGrammar},color:{},rgba:{coords:coordGrammar,commas:!0,lastAlpha:!0},hex:{type:"custom",toGamut:!0,test:e=>/^#([a-f0-9]{3,4}){1,2}$/i.test(e),parse(e){e.length<=5&&(e=e.replace(/[a-f0-9]/gi,"$&$&"));let $=[];return e.replace(/[a-f0-9]{2}/gi,e=>{$.push(parseInt(e,16)/255)}),{spaceId:"srgb",coords:$.slice(0,3),alpha:$.slice(3)[0]}},serialize(e,$,{collapse:t=!0}={}){$<1&&e.push($),e=e.map(e=>Math.round(255*e));let r=t&&e.every(e=>e%17==0);return"#"+e.map(e=>r?(e/17).toString(16):e.toString(16).padStart(2,"0")).join("")}},keyword:{type:"custom",test:e=>/^[a-z]+$/i.test(e),parse(e){e=e.toLowerCase();let $={spaceId:"srgb",coords:null,alpha:1};if("transparent"===e?($.coords=KEYWORDS.black,$.alpha=0):$.coords=KEYWORDS[e],$.coords)return $}}}}),P3=new RGBColorSpace({id:"p3",name:"P3",base:P3Linear,fromBase:sRGB.fromBase,toBase:sRGB.toBase,formats:{color:{id:"display-p3"}}});if(defaults.display_space=sRGB,"undefined"!=typeof CSS&&CSS.supports)for(let space of[lab,REC2020,P3]){let o=space.getMinCoords(),_={space,coords:o,alpha:1},s=serialize(_);if(CSS.supports("color",s)){defaults.display_space=space;break}}function display(e,{space:$=defaults.display_space,...t}={}){let r=serialize(e,t);if("undefined"==typeof CSS||CSS.supports("color",r)||!defaults.display_space)(r=new String(r)).color=e;else{let o=to(e,$);(r=new String(serialize(o,t))).color=o}return r}function distance(e,$,t="lab"){let r=(t=ColorSpace.get(t)).from(e),o=t.from($);return Math.sqrt(r.reduce((e,$,t)=>{let r=o[t];return isNaN($)||isNaN(r)?e:e+(r-$)**2},0))}function equals(e,$){return e=getColor(e),$=getColor($),e.space===$.space&&e.alpha===$.alpha&&e.coords.every((e,t)=>e===$.coords[t])}function getLuminance(e){return get(e,[XYZ_D65,"y"])}function setLuminance(e){set(e,[XYZ_D65,"y"],value)}function register$2(e){Object.defineProperty(e.prototype,"luminance",{get(){return getLuminance(this)},set(e){setLuminance(this)}})}var luminance=Object.freeze({__proto__:null,getLuminance:getLuminance,setLuminance:setLuminance,register:register$2});function contrastWCAG21(e,$){e=getColor(e),$=getColor($);let t=Math.max(getLuminance(e),0),r=Math.max(getLuminance($),0);return r>t&&([t,r]=[r,t]),(t+.05)/(r+.05)}let normBG=.56,normTXT=.57,revTXT=.62,revBG=.65,blkThrs=.022,blkClmp=1.414,loClip=.1,deltaYmin=5e-4,scaleBoW=1.14,loBoWoffset=.027,scaleWoB=1.14;function fclamp(e){return e>=.022?e:e+(.022-e)**1.414}function linearize(e){return(e<0?-1:1)*Math.pow(Math.abs(e),2.4)}function contrastAPCA(e,$){$=getColor($),e=getColor(e);let t,r,o,_,s;$=to($,"srgb"),[o,_,s]=$.coords;let l=.2126729*linearize(o)+.7151522*linearize(_)+.072175*linearize(s);e=to(e,"srgb"),[o,_,s]=e.coords;let i=.2126729*linearize(o)+.7151522*linearize(_)+.072175*linearize(s),u=fclamp(l),f=fclamp(i);return 100*(.1>Math.abs(t=5e-4>Math.abs(f-u)?0:f>u?1.14*(f**.56-u**.57):1.14*(f**.65-u**.62))?0:t>0?t-.027:t+.027)}function contrastMichelson(e,$){e=getColor(e),$=getColor($);let t=Math.max(getLuminance(e),0),r=Math.max(getLuminance($),0);r>t&&([t,r]=[r,t]);let o=t+r;return 0===o?0:(t-r)/o}let max=5e4;function contrastWeber(e,$){e=getColor(e),$=getColor($);let t=Math.max(getLuminance(e),0),r=Math.max(getLuminance($),0);return r>t&&([t,r]=[r,t]),0===r?5e4:(t-r)/r}function contrastLstar(e,$){e=getColor(e),$=getColor($);let t=get(e,[lab,"l"]),r=get($,[lab,"l"]);return Math.abs(t-r)}let ε$1=216/24389,ε3=24/116,κ=24389/27,white=WHITES.D65;var lab_d65=new ColorSpace({id:"lab-d65",name:"Lab D65",coords:{l:{refRange:[0,100],name:"L"},a:{refRange:[-125,125]},b:{refRange:[-125,125]}},white,base:XYZ_D65,fromBase(e){let $=e.map((e,$)=>e/white[$]).map(e=>e>ε$1?Math.cbrt(e):(κ*e+16)/116);return[116*$[1]-16,500*($[0]-$[1]),200*($[1]-$[2])]},toBase(e){let $=[];return $[1]=(e[0]+16)/116,$[0]=e[1]/500+$[1],$[2]=$[1]-e[2]/200,[$[0]>ε3?Math.pow($[0],3):(116*$[0]-16)/κ,e[0]>8?Math.pow((e[0]+16)/116,3):e[0]/κ,$[2]>ε3?Math.pow($[2],3):(116*$[2]-16)/κ].map((e,$)=>e*white[$])},formats:{lab:{coords:["<percentage> | <number>","<number>","<number>"]}}});let phi=1.618033988749895;function contrastDeltaPhi(e,$){e=getColor(e),$=getColor($);let t=get(e,[lab_d65,"l"]),r,o=Math.pow(Math.abs(Math.pow(t,1.618033988749895)-Math.pow(get($,[lab_d65,"l"]),1.618033988749895)),.6180339887498948)*Math.SQRT2-40;return o<7.5?0:o}var contrastMethods=Object.freeze({__proto__:null,contrastWCAG21:contrastWCAG21,contrastAPCA:contrastAPCA,contrastMichelson:contrastMichelson,contrastWeber:contrastWeber,contrastLstar:contrastLstar,contrastDeltaPhi:contrastDeltaPhi});function contrast(e,$,t={}){isString(t)&&(t={algorithm:t});let{algorithm:r,...o}=t;if(!r){let _=Object.keys(contrastMethods).map(e=>e.replace(/^contrast/,"")).join(", ");throw TypeError(`contrast() function needs a contrast algorithm. Please specify one of: ${_}`)}for(let s in e=getColor(e),$=getColor($),contrastMethods)if("contrast"+r.toLowerCase()===s.toLowerCase())return contrastMethods[s](e,$,o);throw TypeError(`Unknown contrast algorithm: ${r}`)}function uv(e){let[$,t,r]=getAll(e,XYZ_D65),o=$+15*t+3*r;return[4*$/o,9*t/o]}function xy(e){let[$,t,r]=getAll(e,XYZ_D65),o=$+t+r;return[$/o,t/o]}function register$1(e){Object.defineProperty(e.prototype,"uv",{get(){return uv(this)}}),Object.defineProperty(e.prototype,"xy",{get(){return xy(this)}})}var chromaticity=Object.freeze({__proto__:null,uv:uv,xy:xy,register:register$1});function deltaE76(e,$){return distance(e,$,"lab")}let π=Math.PI,d2r=π/180;function deltaECMC(e,$,{l:t=2,c:r=1}={}){let[o,_,s]=lab.from(e),[,l,i]=lch.from(lab,[o,_,s]),[u,f,h]=lab.from($),C=lch.from(lab,[u,f,h])[1];l<0&&(l=0),C<0&&(C=0);let y=l-C,w=.511;o>=16&&(w=.040975*o/(1+.01765*o));let S=.0638*l/(1+.0131*l)+.638;Number.isNaN(i)&&(i=0);let M=Math.pow(l,4),L=Math.sqrt(M/(M+1900)),R=S*(L*(i>=164&&i<=345?.56+Math.abs(.2*Math.cos((i+168)*d2r)):.36+Math.abs(.4*Math.cos((i+35)*d2r)))+1-L),v=((o-u)/(t*w))**2;return v+=(y/(r*S))**2,Math.sqrt(v+=((_-f)**2+(s-h)**2-y**2)/R**2)}let Yw$1=203;var XYZ_Abs_D65=new ColorSpace({id:"xyz-abs-d65",name:"Absolute XYZ D65",coords:{x:{refRange:[0,9504.7],name:"Xa"},y:{refRange:[0,1e4],name:"Ya"},z:{refRange:[0,10888.3],name:"Za"}},base:XYZ_D65,fromBase:e=>e.map(e=>Math.max(203*e,0)),toBase:e=>e.map(e=>Math.max(e/203,0))});let b$1=1.15,g=.66,n$1=2610/16384,ninv$1=16384/2610,c1$2=.8359375,c2$2=18.8515625,c3$2=18.6875,p=1.7*2523/32,pinv=32/(1.7*2523),d=-.56,d0=16295499532821565e-27,XYZtoCone_M=[[.41478972,.579999,.014648],[-.20151,1.120649,.0531008],[-.0166008,.2648,.6684799]],ConetoXYZ_M=[[1.9242264357876067,-1.0047923125953657,.037651404030618],[.35031676209499907,.7264811939316552,-.06538442294808501],[-.09098281098284752,-.3127282905230739,1.5227665613052603]],ConetoIab_M=[[.5,.5,0],[3.524,-4.066708,.542708],[.199076,1.096799,-1.295875]],IabtoCone_M=[[1,.1386050432715393,.05804731615611886],[.9999999999999999,-.1386050432715393,-.05804731615611886],[.9999999999999998,-.09601924202631895,-.8118918960560388]];var Jzazbz=new ColorSpace({id:"jzazbz",name:"Jzazbz",coords:{jz:{refRange:[0,1],name:"Jz"},az:{refRange:[-.5,.5]},bz:{refRange:[-.5,.5]}},base:XYZ_Abs_D65,fromBase(e){let[$,t,r]=e,o=multiplyMatrices(XYZtoCone_M,[1.15*$-(1.15-1)*r,.66*t-(.66-1)*$,r]).map(function(e){return((.8359375+18.8515625*(e/1e4)**n$1)/(1+18.6875*(e/1e4)**n$1))**p}),[_,s,l]=multiplyMatrices(ConetoIab_M,o);return[.43999999999999995*_/(1+-.56*_)-16295499532821565e-27,s,l]},toBase(e){let[$,t,r]=e,o=multiplyMatrices(IabtoCone_M,[($+16295499532821565e-27)/(.43999999999999995- -.56*($+16295499532821565e-27)),t,r]).map(function(e){return 1e4*((.8359375-e**pinv)/(18.6875*e**pinv-18.8515625))**ninv$1}),[_,s,l]=multiplyMatrices(ConetoXYZ_M,o),i=(_+(1.15-1)*l)/1.15;return[i,(s+(.66-1)*i)/.66,l]},formats:{color:{}}}),jzczhz=new ColorSpace({id:"jzczhz",name:"JzCzHz",coords:{jz:{refRange:[0,1],name:"Jz"},cz:{refRange:[0,1],name:"Chroma"},hz:{refRange:[0,360],type:"angle",name:"Hue"}},base:Jzazbz,fromBase(e){let[$,t,r]=e,o;return o=2e-4>Math.abs(t)&&2e-4>Math.abs(r)?NaN:180*Math.atan2(r,t)/Math.PI,[$,Math.sqrt(t**2+r**2),constrain(o)]},toBase:e=>[e[0],e[1]*Math.cos(e[2]*Math.PI/180),e[1]*Math.sin(e[2]*Math.PI/180)],formats:{color:{}}});function deltaEJz(e,$){let[t,r,o]=jzczhz.from(e),[_,s,l]=jzczhz.from($);Number.isNaN(o)&&Number.isNaN(l)?(o=0,l=0):Number.isNaN(o)?o=l:Number.isNaN(l)&&(l=o);let i;return Math.sqrt((t-_)**2+(r-s)**2+(2*Math.sqrt(r*s)*Math.sin((o-l)/2*(Math.PI/180)))**2)}let c1$1=.8359375,c2$1=2413/128,c3$1=18.6875,m1=2610/16384,m2=2523/32,im1=16384/2610,im2=32/2523,XYZtoLMS_M$1=[[.3592,.6976,-.0358],[-.1922,1.1004,.0755],[.007,.0749,.8434]],LMStoIPT_M=[[.5,.5,0],[6610/4096,-13613/4096,7003/4096],[17933/4096,-17390/4096,-543/4096]],IPTtoLMS_M=[[.9999888965628402,.008605050147287059,.11103437159861648],[1.00001110343716,-.008605050147287059,-.11103437159861648],[1.0000320633910054,.56004913547279,-.3206339100541203],],LMStoXYZ_M$1=[[2.0701800566956137,-1.326456876103021,.20661600684785517],[.3649882500326575,.6804673628522352,-.04542175307585323],[-.04959554223893211,-.04942116118675749,1.1879959417328034]];var ictcp=new ColorSpace({id:"ictcp",name:"ICTCP",coords:{i:{refRange:[0,1],name:"I"},ct:{refRange:[-.5,.5],name:"CT"},cp:{refRange:[-.5,.5],name:"CP"}},base:XYZ_Abs_D65,fromBase(e){let $=multiplyMatrices(XYZtoLMS_M$1,e);return LMStoICtCp($)},toBase(e){let $=ICtCptoLMS(e);return multiplyMatrices(LMStoXYZ_M$1,$)},formats:{color:{}}});function LMStoICtCp(e){return multiplyMatrices(LMStoIPT_M,e.map(function(e){return((.8359375+c2$1*(e/1e4)**m1)/(1+18.6875*(e/1e4)**m1))**m2}))}function ICtCptoLMS(e){return multiplyMatrices(IPTtoLMS_M,e).map(function(e){return 1e4*(Math.max(e**im2-.8359375,0)/(c2$1-18.6875*e**im2))**im1})}function deltaEITP(e,$){let[t,r,o]=ictcp.from(e),[_,s,l]=ictcp.from($);return 720*Math.sqrt((t-_)**2+.25*(r-s)**2+(o-l)**2)}let XYZtoLMS_M=[[.8190224432164319,.3619062562801221,-.12887378261216414],[.0329836671980271,.9292868468965546,.03614466816999844],[.048177199566046255,.26423952494422764,.6335478258136937]],LMStoXYZ_M=[[1.2268798733741557,-.5578149965554813,.28139105017721583],[-.04057576262431372,1.1122868293970594,-.07171106666151701],[-.07637294974672142,-.4214933239627914,1.5869240244272418]],LMStoLab_M=[[.2104542553,.793617785,-.0040720468],[1.9779984951,-2.428592205,.4505937099],[.0259040371,.7827717662,-.808675766]],LabtoLMS_M=[[.9999999984505198,.39633779217376786,.2158037580607588],[1.0000000088817609,-.10556134232365635,-.06385417477170591],[1.0000000546724108,-.08948418209496575,-1.2914855378640917]];var OKLab=new ColorSpace({id:"oklab",name:"OKLab",coords:{l:{refRange:[0,1],name:"L"},a:{refRange:[-.4,.4]},b:{refRange:[-.4,.4]}},white:"D65",base:XYZ_D65,fromBase(e){let $=multiplyMatrices(XYZtoLMS_M,e).map(e=>Math.cbrt(e));return multiplyMatrices(LMStoLab_M,$)},toBase(e){let $=multiplyMatrices(LabtoLMS_M,e).map(e=>e**3);return multiplyMatrices(LMStoXYZ_M,$)},formats:{oklab:{coords:["<percentage>","<number>","<number>"]}}});function deltaEOK(e,$){let[t,r,o]=OKLab.from(e),[_,s,l]=OKLab.from($);return Math.sqrt((t-_)**2+(r-s)**2+(o-l)**2)}var deltaEMethods=Object.freeze({__proto__:null,deltaE76:deltaE76,deltaECMC:deltaECMC,deltaE2000:deltaE2000,deltaEJz:deltaEJz,deltaEITP:deltaEITP,deltaEOK:deltaEOK});function deltaE(e,$,t={}){isString(t)&&(t={method:t});let{method:r=defaults.deltaE,...o}=t;for(let _ in e=getColor(e),$=getColor($),deltaEMethods)if("deltae"+r.toLowerCase()===_.toLowerCase())return deltaEMethods[_](e,$,o);throw TypeError(`Unknown deltaE method: ${r}`)}var deltaE$1=Object.freeze({__proto__:null,default:deltaE});function lighten(e,$=.25){let t;return set$1(e,[ColorSpace.get("oklch","lch"),"l"],e=>e*(1+$))}function darken(e,$=.25){let t;return set$1(e,[ColorSpace.get("oklch","lch"),"l"],e=>e*(1-$))}var variations=Object.freeze({__proto__:null,lighten:lighten,darken:darken});function mix(e,$,t=.5,r={}){[e,$]=[getColor(e),getColor($)],"object"===type(t)&&([t,r]=[.5,t]);let{space:o,outputSpace:_}=r;return range(e,$,{space:o,outputSpace:_})(t)}function steps(e,$,t={}){let r;isRange(e)&&([r,t]=[e,$],[e,$]=r.rangeArgs.colors);let{maxDeltaE:o,deltaEMethod:_,steps:s=2,maxSteps:l=1e3,...i}=t;r||([e,$]=[getColor(e),getColor($)],r=range(e,$,i));let u=deltaE(e,$),f=o>0?Math.max(s,Math.ceil(u/o)+1):s,h=[];if(void 0!==l&&(f=Math.min(f,l)),1===f)h=[{p:.5,color:r(.5)}];else{let C=1/(f-1);h=Array.from({length:f},(e,$)=>{let t=$*C;return{p:t,color:r(t)}})}if(o>0){let y=h.reduce((e,$,t)=>{if(0===t)return 0;let r=deltaE($.color,h[t-1].color,_);return Math.max(e,r)},0);for(;y>o;){y=0;for(let w=1;w<h.length&&h.length<l;w++){let S=h[w-1],M=h[w],L=(M.p+S.p)/2,R=r(L);y=Math.max(y,deltaE(R,S.color),deltaE(R,M.color)),h.splice(w,0,{p:L,color:r(L)}),w++}}}return h=h.map(e=>e.color)}function range(e,$,t={}){if(isRange(e)){let[r,o]=[e,$];return range(...r.rangeArgs.colors,{...r.rangeArgs.options,...o})}let{space:_,outputSpace:s,progression:l,premultiplied:i}=t;e=getColor(e),$=getColor($),e=clone(e),$=clone($);let u={colors:[e,$],options:t};if(_=_?ColorSpace.get(_):ColorSpace.registry[defaults.interpolationSpace]||e.space,s=s?ColorSpace.get(s):_,e=to(e,_),$=to($,_),e=toGamut(e),$=toGamut($),_.coords.h&&"angle"===_.coords.h.type){let f=t.hue=t.hue||"shorter",h=[_,"h"],[C,y]=[get(e,h),get($,h)];[C,y]=adjust(f,[C,y]),set$1(e,h,C),set$1($,h,y)}return i&&(e.coords=e.coords.map($=>$*e.alpha),$.coords=$.coords.map(e=>e*$.alpha)),Object.assign(t=>{t=l?l(t):t;let r=e.coords.map((e,r)=>interpolate(e,$.coords[r],t)),o=interpolate(e.alpha,$.alpha,t),u={space:_,coords:r,alpha:o};return i&&(u.coords=u.coords.map(e=>e/o)),s!==_&&(u=to(u,s)),u},{rangeArgs:u})}function isRange(e){return"function"===type(e)&&!!e.rangeArgs}function register(e){e.defineFunction("mix",mix,{returns:"color"}),e.defineFunction("range",range,{returns:"function<color>"}),e.defineFunction("steps",steps,{returns:"array<color>"})}defaults.interpolationSpace="lab";var interpolation=Object.freeze({__proto__:null,mix:mix,steps:steps,range:range,isRange:isRange,register:register}),HSL=new ColorSpace({id:"hsl",name:"HSL",coords:{h:{refRange:[0,360],type:"angle",name:"Hue"},s:{range:[0,100],name:"Saturation"},l:{range:[0,100],name:"Lightness"}},base:sRGB,fromBase(e){let $=Math.max(...e),t=Math.min(...e),[r,o,_]=e,[s,l,i]=[NaN,0,(t+$)/2],u=$-t;if(0!==u){switch(l=0===i||1===i?0:($-i)/Math.min(i,1-i),$){case r:s=(o-_)/u+(o<_?6:0);break;case o:s=(_-r)/u+2;break;case _:s=(r-o)/u+4}s*=60}return[s,100*l,100*i]},toBase(e){let[$,t,r]=e;function o(e){let o=(e+$/30)%12,_=t*Math.min(r,1-r);return r-_*Math.max(-1,Math.min(o-3,9-o,1))}return($%=360)<0&&($+=360),t/=100,r/=100,[o(0),o(8),o(4)]},formats:{hsl:{toGamut:!0,coords:["<number> | <angle>","<percentage>","<percentage>"]},hsla:{coords:["<number> | <angle>","<percentage>","<percentage>"],commas:!0,lastAlpha:!0}}}),HSV=new ColorSpace({id:"hsv",name:"HSV",coords:{h:{refRange:[0,360],type:"angle",name:"Hue"},s:{range:[0,100],name:"Saturation"},v:{range:[0,100],name:"Value"}},base:HSL,fromBase(e){let[$,t,r]=e,o=(r/=100)+(t/=100)*Math.min(r,1-r);return[$,0===o?0:200*(1-r/o),100*o]},toBase(e){let[$,t,r]=e,o=(r/=100)*(1-(t/=100)/2);return[$,0===o||1===o?0:(r-o)/Math.min(o,1-o)*100,100*o]},formats:{color:{toGamut:!0}}}),hwb=new ColorSpace({id:"hwb",name:"HWB",coords:{h:{refRange:[0,360],type:"angle",name:"Hue"},w:{range:[0,100],name:"Whiteness"},b:{range:[0,100],name:"Blackness"}},base:HSV,fromBase(e){let[$,t,r]=e;return[$,r*(100-t)/100,100-r]},toBase(e){let[$,t,r]=e,o=(t/=100)+(r/=100);if(o>=1)return[$,0,100*(t/o)];let _=1-r;return[$,100*(0===_?0:1-t/_),100*_]},formats:{hwb:{toGamut:!0,coords:["<number> | <angle>","<percentage>","<percentage>"]}}});let toXYZ_M$2=[[.5766690429101305,.1855582379065463,.1882286462349947],[.29734497525053605,.6273635662554661,.07529145849399788],[.02703136138641234,.07068885253582723,.9913375368376388]],fromXYZ_M$2=[[2.0415879038107465,-.5650069742788596,-.34473135077832956],[-.9692436362808795,1.8759675015077202,.04155505740717557],[.013444280632031142,-.11836239223101838,1.0151749943912054]];var A98Linear=new RGBColorSpace({id:"a98rgb-linear",name:"Linear Adobe\xae 98 RGB compatible",white:"D65",toXYZ_M:toXYZ_M$2,fromXYZ_M:fromXYZ_M$2}),a98rgb=new RGBColorSpace({id:"a98rgb",name:"Adobe\xae 98 RGB compatible",base:A98Linear,toBase:e=>e.map(e=>Math.pow(Math.abs(e),563/256)*Math.sign(e)),fromBase:e=>e.map(e=>Math.pow(Math.abs(e),256/563)*Math.sign(e)),formats:{color:{id:"a98-rgb"}}});let toXYZ_M$1=[[.7977604896723027,.13518583717574031,.0313493495815248],[.2880711282292934,.7118432178101014,8565396060525902e-20],[0,0,.8251046025104601]],fromXYZ_M$1=[[1.3457989731028281,-.25558010007997534,-.05110628506753401],[-.5446224939028347,1.5082327413132781,.02053603239147973],[0,0,1.2119675456389454]];var ProPhotoLinear=new RGBColorSpace({id:"prophoto-linear",name:"Linear ProPhoto",white:"D50",base:XYZ_D50,toXYZ_M:toXYZ_M$1,fromXYZ_M:fromXYZ_M$1});let Et=1/512,Et2=16/512;var prophoto=new RGBColorSpace({id:"prophoto",name:"ProPhoto",base:ProPhotoLinear,toBase:e=>e.map(e=>e<Et2?e/16:e**1.8),fromBase:e=>e.map(e=>e>=Et?e**(1/1.8):16*e),formats:{color:{id:"prophoto-rgb"}}}),oklch=new ColorSpace({id:"oklch",name:"OKLCh",coords:{l:{refRange:[0,1],name:"Lightness"},c:{refRange:[0,.4],name:"Chroma"},h:{refRange:[0,360],type:"angle",name:"Hue"}},white:"D65",base:OKLab,fromBase(e){let[$,t,r]=e,o;return o=2e-4>Math.abs(t)&&2e-4>Math.abs(r)?NaN:180*Math.atan2(r,t)/Math.PI,[$,Math.sqrt(t**2+r**2),constrain(o)]},toBase(e){let[$,t,r]=e,o,_;return isNaN(r)?(o=0,_=0):(o=t*Math.cos(r*Math.PI/180),_=t*Math.sin(r*Math.PI/180)),[$,o,_]},formats:{oklch:{coords:["<percentage>","<number>","<number> | <angle>"]}}});let Yw=203,n=2610/16384,ninv=16384/2610,m=78.84375,minv=32/2523,c1=.8359375,c2=18.8515625,c3=18.6875;var rec2100Pq=new RGBColorSpace({id:"rec2100pq",name:"REC.2100-PQ",base:REC2020Linear,toBase:e=>e.map(function(e){return 1e4*(Math.max(e**minv-.8359375,0)/(18.8515625-18.6875*e**minv))**ninv/203}),fromBase:e=>e.map(function(e){let $=Math.max(203*e/1e4,0);return((.8359375+18.8515625*$**n)/(1+18.6875*$**n))**78.84375}),formats:{color:{id:"rec2100-pq"}}});let a=.17883277,b=.28466892,c=.55991073;var rec2100Hlg=new RGBColorSpace({id:"rec2100hlg",cssid:"rec2100-hlg",name:"REC.2100-HLG",referred:"scene",base:REC2020Linear,toBase:e=>e.map(function(e){return e<=1/12?Math.sqrt(3*e):.17883277*Math.log(12*e-.28466892)+.55991073}),fromBase:e=>e.map(function(e){return e<=.5?e**2/3:Math.exp((e-.55991073)/.17883277+.28466892)/12}),formats:{color:{id:"rec2100-hlg"}}});let CATs={};function defineCAT({id:e,toCone_M:$,fromCone_M:t}){CATs[e]=arguments[0]}function adapt(e,$,t="Bradford"){let r=CATs[t],[o,_,s]=multiplyMatrices(r.toCone_M,e),[l,i,u]=multiplyMatrices(r.toCone_M,$),f=multiplyMatrices([[l/o,0,0],[0,i/_,0],[0,0,u/s]],r.toCone_M);return multiplyMatrices(r.fromCone_M,f)}hooks.add("chromatic-adaptation-start",e=>{e.options.method&&(e.M=adapt(e.W1,e.W2,e.options.method))}),hooks.add("chromatic-adaptation-end",e=>{e.M||(e.M=adapt(e.W1,e.W2,e.options.method))}),defineCAT({id:"von Kries",toCone_M:[[.40024,.7076,-.08081],[-.2263,1.16532,.0457],[0,0,.91822]],fromCone_M:[[1.8599364,-1.1293816,.2198974],[.3611914,.6388125,-.0000064],[0,0,1.0890636]]}),defineCAT({id:"Bradford",toCone_M:[[.8951,.2664,-.1614],[-.7502,1.7135,.0367],[.0389,-.0685,1.0296]],fromCone_M:[[.9869929,-.1470543,.1599627],[.4323053,.5183603,.0492912],[-.0085287,.0400428,.9684867]]}),defineCAT({id:"CAT02",toCone_M:[[.7328,.4296,-.1624],[-.7036,1.6975,.0061],[.003,.0136,.9834]],fromCone_M:[[1.0961238,-.278869,.1827452],[.454369,.4735332,.0720978],[-.0096276,-.005698,1.0153256]]}),defineCAT({id:"CAT16",toCone_M:[[.401288,.650173,-.051461],[-.250268,1.204414,.045854],[-.002079,.048952,.953127]],fromCone_M:[[1.862067855087233,-1.011254630531685,.1491867754444518],[.3875265432361372,.6214474419314753,-.008973985167612518],[-.01584149884933386,-.03412293802851557,1.04996443687785]]}),Object.assign(WHITES,{A:[1.0985,1,.35585],C:[.98074,1,1.18232],D55:[.95682,1,.92149],D75:[.94972,1,1.22638],E:[1,1,1],F2:[.99186,1,.67393],F7:[.95041,1,1.08747],F11:[1.00962,1,.6435]}),WHITES.ACES=[.32168/.33767,1,1.0088251843515859];let toXYZ_M=[[.6624541811085053,.13400420645643313,.1561876870049078],[.27222871678091454,.6740817658111484,.05368951740793705],[-.005574649490394108,.004060733528982826,1.0103391003129971]],fromXYZ_M=[[1.6410233796943257,-.32480329418479,-.23642469523761225],[-.6636628587229829,1.6153315916573379,.016756347685530137],[.011721894328375376,-.008284441996237409,.9883948585390215]];var ACEScg=new RGBColorSpace({id:"acescg",name:"ACEScg",coords:{r:{range:[0,65504],name:"Red"},g:{range:[0,65504],name:"Green"},b:{range:[0,65504],name:"Blue"}},referred:"scene",white:WHITES.ACES,toXYZ_M,fromXYZ_M,formats:{color:{}}});let ε=152587890625e-16,ACES_min_nonzero=-.35828683,ACES_cc_max=(Math.log2(65504)+9.72)/17.52;var acescc=new RGBColorSpace({id:"acescc",name:"ACEScc",coords:{r:{range:[-.35828683,ACES_cc_max],name:"Red"},g:{range:[-.35828683,ACES_cc_max],name:"Green"},b:{range:[-.35828683,ACES_cc_max],name:"Blue"}},referred:"scene",base:ACEScg,toBase(e){let $=(9.72-15)/17.52;return e.map(function(e){return e<=$?(2**(17.52*e-9.72)-152587890625e-16)*2:e<ACES_cc_max?2**(17.52*e-9.72):65504})},fromBase:e=>e.map(function(e){return e<=0?(Math.log2(152587890625e-16)+9.72)/17.52:e<152587890625e-16?(Math.log2(152587890625e-16+.5*e)+9.72)/17.52:(Math.log2(e)+9.72)/17.52}),formats:{color:{}}}),spaces=Object.freeze({__proto__:null,XYZ_D65:XYZ_D65,XYZ_D50:XYZ_D50,XYZ_ABS_D65:XYZ_Abs_D65,Lab_D65:lab_d65,Lab:lab,LCH:lch,sRGB_Linear:sRGBLinear,sRGB:sRGB,HSL:HSL,HWB:hwb,HSV:HSV,P3_Linear:P3Linear,P3:P3,A98RGB_Linear:A98Linear,A98RGB:a98rgb,ProPhoto_Linear:ProPhotoLinear,ProPhoto:prophoto,REC_2020_Linear:REC2020Linear,REC_2020:REC2020,OKLab:OKLab,OKLCH:oklch,Jzazbz:Jzazbz,JzCzHz:jzczhz,ICTCP:ictcp,REC_2100_PQ:rec2100Pq,REC_2100_HLG:rec2100Hlg,ACEScg:ACEScg,ACEScc:acescc});class Color{constructor(...e){let $;1===e.length&&($=getColor(e[0]));let t,r,o;$?(t=$.space||$.spaceId,r=$.coords,o=$.alpha):[t,r,o]=e,this.#d=ColorSpace.get(t),this.coords=r?r.slice():[0,0,0],this.alpha=o<1?o:1;for(let _=0;_<this.coords.length;_++)"NaN"===this.coords[_]&&(this.coords[_]=NaN);for(let s in this.#d.coords)Object.defineProperty(this,s,{get:()=>this.get(s),set:e=>this.set(s,e)})}#d;get space(){return this.#d}get spaceId(){return this.#d.id}clone(){return new Color(this.space,this.coords,this.alpha)}toJSON(){return{spaceId:this.spaceId,coords:this.coords,alpha:this.alpha}}display(...e){let $=display(this,...e);return $.color=new Color($.color),$}static get(e,...$){return e instanceof Color?e:new Color(e,...$)}static defineFunction(e,$,t=$){1===arguments.length&&([e,$,t]=[arguments[0].name,arguments[0],arguments[0]]);let{instance:r=!0,returns:o}=t,_=function(...e){let t=$(...e);if("color"===o)t=Color.get(t);else if("function<color>"===o){let r=t;Object.assign(t=function(...e){let $=r(...e);return Color.get($)},r)}else"array<color>"===o&&(t=t.map(e=>Color.get(e)));return t};e in Color||(Color[e]=_),r&&(Color.prototype[e]=function(...e){return _(this,...e)})}static defineFunctions(e){for(let $ in e)Color.defineFunction($,e[$],e[$])}static extend(e){if(e.register)e.register(Color);else if(e.default)Color.defineFunction(e.default.name,e.default);else if("function"==typeof e)Color.defineFunction(e);else for(let $ in e)Color.defineFunction($,e[$])}}for(let key of(Color.defineFunctions({get,getAll,set:set$1,setAll,to,equals,inGamut,toGamut,distance,toString:serialize}),Object.assign(Color,{util,hooks,WHITES,Space:ColorSpace,spaces:ColorSpace.registry,parse,defaults}),Object.keys(spaces)))ColorSpace.register(spaces[key]);for(let id in ColorSpace.registry)addSpaceAccessors(id,ColorSpace.registry[id]);function addSpaceAccessors(e,$){Object.keys($.coords),Object.values($.coords).map(e=>e.name);let t=e.replace(/-/g,"_");Object.defineProperty(Color.prototype,t,{get(){let t=this.getAll(e);return"undefined"==typeof Proxy?t:new Proxy(t,{has(e,t){try{return ColorSpace.resolveCoord([$,t]),!0}catch(r){}return Reflect.has(e,t)},get(e,t,r){if(t&&"symbol"!=typeof t&&!(t in e)){let{index:o}=ColorSpace.resolveCoord([$,t]);if(o>=0)return e[o]}return Reflect.get(e,t,r)},set:(t,r,o,_)=>{if(r&&"symbol"!=typeof r&&!(r in t)||r>=0){let{index:s}=ColorSpace.resolveCoord([$,r]);if(s>=0)return t[s]=o,this.setAll(e,t),!0}return Reflect.set(t,r,o,_)}})},set($){this.setAll(e,$)},configurable:!0,enumerable:!0})}hooks.add("colorspace-init-end",addSpaceAccessors),Color.extend(deltaEMethods),Color.extend(deltaE$1),Color.extend(variations),Color.extend(contrast),Color.extend(chromaticity),Color.extend(luminance),Color.extend(interpolation),Color.extend(contrastMethods);export{Color as default};
