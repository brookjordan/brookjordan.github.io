"use strict";function pushCommand(n){var o=pokedex(n.pokemon);n.consumed.candy&&(o.candy-=n.consumed.candy,o.evolutions.forEach(function(n){return updateCandy(n)})),n.consumed.monster&&(o.owned-=n.consumed.monster,o.evolutions.forEach(function(n){return updateOwned(n)})),(n.consumed.candy||n.consumed.monster)&&o.evolutions.forEach(function(n){return updateEvolvable(n)}),save()}function undoCommands(n){if(commandList.length){var o=commandList.pop();!Array.isArray(o)&&(o=[o]),o.forEach(undoCommand)}commandList.length||(undo.disabled=!0),save()}function undoCommand(n){var o=pokedex(n.pokemon);o.candy+=n.consumed.candy,o.owned+=n.consumed.monster,o.evolutions.forEach(function(n){updateOwned(n),updateCandy(n),updateEvolvable(n)})}var commandList=[],undo=document.querySelector("button");undo.disabled=!0,commandList.push=function(n){undo.disabled=!1,!Array.isArray(n)&&(n=[n]),n.forEach(pushCommand),Array.prototype.push.call(commandList,n)},undo.addEventListener("click",undoCommands),window.addEventListener("keydown",function(n){"z"===n.key.toLowerCase()&&(n.ctrlKey||n.metaKey)&&(n.preventDefault(),undoCommands())});