
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Colour Swatches</title>
  <link href='https://fonts.googleapis.com/css?family=Open+Sans:300|Raleway:100' rel='stylesheet' type='text/css'>
  <link rel="stylesheet prefetch" href="https://cdnjs.cloudflare.com/ajax/libs/meyer-reset/2.0/reset.min.css">
  <style>
    * {
      box-sizing: border-box;
      -webkit-touch-callout: none;
      -webkit-user-select: none;
      -moz-user-select: none;
      -ms-user-select: none;
      user-select: none;
    }

    body {
      padding-top: 70px;
      padding-bottom: 90vh;
      -webkit-transition: background-color .5s;
      transition: background-color .5s;
    }

    .colors {
      display: -webkit-box;
      display: -ms-flexbox;
      display: flex;
      -ms-flex-flow: row wrap;
          flex-flow: row wrap;
      -webkit-box-pack: center;
          -ms-flex-pack: center;
              justify-content: center;
      margin: 0;
    }

    h3 {
      text-transform: lowercase;
    }

    h3 span {
      display: inline-block;
      line-height: 1.4;
    }

    h1, h2, h3, h4, h5, h6, p {
      margin: 0;
    }

    .compare {
      position: fixed;
      top: 0;
      left: 0;
      z-index: 1;
      width: 100%;
      background: #fff;
      -webkit-transition: background-color .5s;
      transition: background-color .5s;
    }

    .compare__input {
      display: block;
      width: 100%;
      height: 70px;
      line-height: 70px;
      padding: 0;
      border: 0;
      margin: 0;
      text-indent: 0.5em;
      background: rgba(255, 255, 255, 0);
      outline: 0;
      text-align: center;
      font-family: "Raleway", "Open Sans", sans-serif;
      font-weight: 100;
      -webkit-transition: color .5s, height .5s, line-height .5s;
      transition: color .5s, height .5s, line-height .5s;
    }

    color {
      display: block;
      -webkit-box-flex: 150px;
          -ms-flex: 150px 1 0;
              flex: 150px 1 0;
      -webkit-box-ordinal-group: 999999;
          -ms-flex-order: 999998;
              order: 999998;
    }

    .constrain {
      max-width: 140px;
      margin: 0 auto;
    }

    .sizer {
      position: relative;
      z-index: 0;
      padding-bottom: 1em;
    }

    .wrapper {
      position: relative;
      z-index: 0;
      width: 100%;
      height: 100%;
      padding: 0 5%;
    }

    .compare__input,
    h3 {
      font-family: "Raleway", "Open Sans", sans-serif;
      font-weight: 100;
      font-size: 20px;
      line-height: 1.8;
      text-align: center;
      opacity: 0.6;
      cursor: pointer;
    }

    p {
      font-family: "Open Sans", sans-serif;
      font-weight: 300;
      font-size: 13px;
      line-height: 1;
      padding: 2% 0;
      opacity: 0.8;
      cursor: pointer;
    }
    p::after {
      content: '';
      display: table;
      clear: both;
    }
    p span {
      float: right;
    }

    .modal {
      position: fixed;
      top: 10px;
      left: 10%;
      z-index: 2;
      max-width: 80%;
      padding: 2% 5%;
      background: white;
      opacity: 0;
      pointer-events: none;
      border: 1px solid rgba(0, 0, 0, 0.1);
      font-family: "raleway" "open sans" sans-serif;
      font-size: 12px;
      -webkit-transition: opacity 2s;
      transition: opacity 2s;
      -webkit-transition-delay: 1s;
              transition-delay: 1s;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
      border-radius: 4px;
      text-transform: none;
    }
    .modal.show {
      opacity: 0.8;
      -webkit-transition: opacity .2s;
      transition: opacity .2s;
    }
    .modal.error {
      background-color: #f6574d;
      text-transform: lowercase;
    }

    small {
      -webkit-box-ordinal-group: 1000000;
          -ms-flex-order: 999999;
              order: 999999;
    }

    @media (max-width: 149px) {
      color {
        -webkit-box-flex: 50px;
            -ms-flex: 50px 1 0;
                flex: 50px 1 0;
      }

      h3 {
        opacity: 0;
        width: 100%;
        height: 100%;
      }

      p {
        display: none;
      }

      .wrapper {
        padding: 0;
      }

      body {
        padding-top: 50px;
      }

      .compare__input {
        height: 50px;
        line-height: 50px;
      }

      .modal {
        display: none;
      }
    }
    @media (min-width: 260px) {
      color {
        -webkit-box-flex: 200px;
            -ms-flex: 200px 1 0;
                flex: 200px 1 0;
      }

      .constrain {
        max-width: 260px;
      }

      .wrapper {
        padding: 10px 20px;
      }

      .compare__input,
      h3 {
        font-size: 40px;
        line-height: 2;
      }

      p {
        font-size: 15px;
        padding: 2% 0;
      }

      .modal {
        font-size: 20px;
      }

      body {
        padding-top: 100px;
      }

      .compare__input {
        height: 100px;
        line-height: 100px;
      }
    }
    @media (min-width: 2000px) {
      color {
        -webkit-box-flex: 300px;
            -ms-flex: 300px 1 0;
                flex: 300px 1 0;
      }

      .constrain {
        max-width: 300px;
      }

      .wrapper {
        padding: 15px 30px;
      }

      .compare__input,
      h3 {
        font-size: 50px;
        line-height: 2;
      }

      p {
        font-size: 18px;
      }

      .modal {
        font-size: 40px;
      }

      body {
        padding-top: 150px;
      }

      .compare__input {
        height: 150px;
        line-height: 150px;
      }
    }
  </style>
</head>
<body>
  <div class="colors">
    <div class="compare">
      <input class="compare__input" type="text" placeholder="test" />
    </div>

    <!--Main Brand-->
    <color name="Lizard"                   hex="70cf32" ></color>
    <color name="Storm"                  hex="6c7279" ></color>
    <color name="Slate"                  hex="2d3033" ></color>

    <!--Greys-->
    <color name="White"                  hex="ffffff" ></color>
    <color name="Gray 1"                 hex="f4f4f5" ></color>
    <color name="Gray 2"                 hex="e2e6e8" ></color>
    <color name="Gray 3"                 hex="c4ced1" ></color>
    <color name="Gray 4"                 hex="a4aeb3" ></color>
    <color name="Gray 5"                 hex="889096" ></color>
    <color name="Gray 6"                 hex="6c7279" ></color>
    <color name="Gray 7"                 hex="585d64" ></color>
    <color name="Gray 8"                 hex="393c40" ></color>
    <color name="Gray 9"                 hex="2d3033" ></color>
    <color name="Gray 10"                hex="242629" ></color>
    <color name="Black"                  hex="000000" ></color>

    <!--Colours-->
    <color name="Mayhem light"           hex="dc2828" ></color>
    <color name="Mayhem"                 hex="c61c1c" ></color>
    <color name="Mayhem dark"            hex="b51919" ></color>

    <color name="Watermelon light"       hex="fa7367" ></color>
    <color name="Watermelon"             hex="f6574d" ></color>
    <color name="Watermelon dark"        hex="e14f46" ></color>

    <color name="Oops light"             hex="fccc0a" ></color>
    <color name="Oops"                   hex="fbb207" ></color>
    <color name="Oops dark"              hex="e6a306" ></color>

    <color name="Prosper light"          hex="f2e544" ></color>
    <color name="Prosper"                hex="eedf24" ></color>
    <color name="Prosper dark"           hex="dacc21" ></color>

    <color name="Snot light"             hex="CCF111" ></color>
    <color name="Snot"                   hex="B2E60C" ></color>
    <color name="Snot dark"              hex="ABCA0D" ></color>

    <color name="Lizard light"             hex="8fe246" ></color>
    <color name="Lizard"                   hex="70cf32" ></color>
    <color name="Lizard dark"              hex="2FB628" ></color>

    <color name="Surf light"             hex="9aefd5" ></color>
    <color name="Surf"                   hex="7be3bd" ></color>
    <color name="Surf dark"              hex="70d0ad" ></color>

    <color name="Sky light"              hex="8ee6e9" ></color>
    <color name="Sky"                    hex="6fd5d9" ></color>
    <color name="Sky dark"               hex="65c3c7" ></color>

    <color name="VHS light"              hex="285e7f" ></color>
    <color name="VHS"                    hex="1c4561" ></color>
    <color name="VHS dark"               hex="193f59" ></color>

    <color name="Ocean light"            hex="5ab9e1" ></color>
    <color name="Ocean"                  hex="429bce" ></color>
    <color name="Ocean dark"             hex="2a78a4" ></color>

    <color name="Royal light"            hex="8d95f2" ></color>
    <color name="Royal"                  hex="5960ce" ></color>
    <color name="Royal dark"             hex="5158bd" ></color>

    <color name="Haze light"             hex="c980db" ></color>
    <color name="Haze"                   hex="a058b8" ></color>
    <color name="Haze dark"              hex="9250a8" ></color>

    <color name="Baby light"             hex="f56bbf" ></color>
    <color name="Baby"                   hex="ed50a2" ></color>
    <color name="Baby dark"              hex="d94994" ></color>

    <color name="Dragonfruit light"      hex="ea2fa1" ></color>
    <color name="Dragonfruit"            hex="db2182" ></color>
    <color name="Dragonfruit dark"       hex="c81e77" ></color>

    <!--Backgrounds gradients-->
    <color name="Wash"      hex="ffffff,f4f4f5" ></color>
    <color name="Sign"      hex="a058b8,5960ce" ></color>
    <color name="Show"      hex="1b4868,2071a9" ></color>
    <color name="Discover"  hex="56b8dd,2f68a3" ></color>
    <color name="Platform"  hex="3b79cb,47b1ed" ></color>

    <!--Icon/button gradients-->
    <color name="Zenith"    hex="3c6ecd,69d5f5" ></color>
    <color name="Solstice"  hex="f6497f,584cd1" ></color>
    <color name="Click"     hex="6ccb34,32b76b" ></color>
    <color name="Grass"     hex="e3e170,09b1c3" ></color>
    <color name="Wave"      hex="00e691,70bcfc" ></color>
    <color name="Malibu"    hex="585cd1,ff38d6" ></color>
    <color name="Rise"      hex="f65b86,ffce6c" ></color>
    <color name="Set"       hex="fdc443,ff4cbf" ></color>
    <color name="Flight"    hex="fb97ca,4895e7" ></color>

    <color empty ></color>
    <color empty ></color>
    <color empty ></color>
    <color empty ></color>
    <color empty ></color>
    <color empty ></color>
    <color empty ></color>
    <color empty ></color>
    <color empty ></color>
    <color empty ></color>
  </div>
  <small>*CMYK values, when provided, should be based on the <strong>sRGB IEC61966-2.1</strong> profile.</small>

  <script>
    let ColorConverter = {
      toRGB,
      toHSV,
      toHSL,
    };

    let colourNames = 'white gray black'.split(' ');

    let builtSwatchCount = 0;

    let swapping = false;
    let swappingElt   = false;
    let swapWithElt   = false;

    let compareContainer = document.querySelector('.compare');
    let compareInput = document.querySelector('.compare__input');
    let testElement = document.createElement('div');
    testElement.style.position = 'absolute';
    testElement.style.opacity = 0;
    document.body.appendChild(testElement);

    let copy_input_elt = document.createElement('input');
    document.body.appendChild( copy_input_elt );
    copy_input_elt.style.display = 'none';

    let colourElts= [];


    document.addEventListener('mouseup', swapSelectedSwatches, false);
    document.addEventListener('mouseleave', swapSelectedSwatches, false);

    buildModal();

    Array.prototype.forEach.call(
      document.querySelectorAll('color'),
      buildSwatch
    );

    compareInput.addEventListener('keyup', updateCompare, false);


    function swapSelectedSwatches () {
      if (swapping && swapWithElt) {
        swapSwatches(swappingElt, swapWithElt);
      }
      swapping = false;
      swapWithElt = false;
      swappingElt = false;
    }

    function swapSwatches (swapping, swapWith) {
      let swappingOrder = swapping.style.order;
      let swapWithOrder = swapWith.style.order;
      swapping.style.order = swapWithOrder;
      swapWith.style.order = swappingOrder;
    }

    function updateCompare (e) {
      let val    = compareInput.value.split(',')[0].toUpperCase();
      let hexxed = hexify(val);

      //  If it's a valid hex value
      let inputColor;
      if (isHex(hexxed)) {
        inputColor = toRGB(hexxed);
        val = hexxed;
      } else {
        testElement.style.color = val ? val.trim() : 'white';
        inputColor = new RGB(
          ...getComputedStyle(testElement).color
            .match(/ *\d+ *, *\d+ *, *\d+ */)[0]
            .split(',')
        );
        val = hexify(toHex(inputColor));
      };

      inputColor = toHSL(inputColor);
      compareContainer.style.backgroundColor = document.body.style.backgroundColor = val;

      if (inputColor.l < 45) {
        compareInput.style.color = '#fff';
      } else {
        compareInput.style.color = '#000';
      }
    }

    function hexify(val) {
      val = val.toUpperCase()
      val = val && String(val).match(/[0-9A-Z]+/);
      val = val ? val[0] : '';
      if (val.length < 7) {
        if (val.length === 6) {
          return `#${val}`;
        }
        if (val.length === 3) {
          return `#${val[0]}${val[0]}${val[1]}${val[1]}${val[2]}${val[2]}`;
        }
      }
    }

    function isHex(val) {
      return /^#(([0-9A-F]{3})|([0-9A-F]{6}))$/i.test(val);
    }

    function buildModal () {
      var modal = document.createElement('h1');

      modal.className = 'modal';

      document.body.appendChild( modal );
    }

    function displayModal (text) {
      let modal = document.querySelector('.modal');

      modal.innerText = 'Copied: ' + text;
      modal.classList.add( 'show' );
      setTimeout(function() {
        modal.classList.remove( 'show' );
      }, 200);

      let items = text.split(',');
      let item = items.length > 1 && items.indexOf(compareInput.value) > -1
        ? items[(items.indexOf(compareInput.value) + 1) % items.length]
        : items[0];

      if (isHex(item)) {
        compareInput.value = item;
        updateCompare();
      };
    }

    function buildSwatch ( elt ) {
      builtSwatchCount += 1;
      let empty   = elt.getAttribute( 'empty' );
      if ( typeof empty === 'string' && empty !== 'false' ) { return; }

      let name    = elt.getAttribute( 'name' );
      let hex     = elt.getAttribute( 'hex' ).replace(/#/g, '').split(',');
      let rgb     = hex.map(hh => ColorConverter.toRGB(hh));
      let hsl     = rgb.map(rr => ColorConverter.toHSL(rr));
      let cmyk    = elt.getAttribute( 'cmyk' );
      let pantone = elt.getAttribute( 'pantone' );
      let constrain_elt = document.createElement('div');
      let sizer_elt     = document.createElement('div');
      let wrapper_elt   = document.createElement('div');
      constrain_elt.className = 'constrain';
      sizer_elt.className     = 'sizer';
      wrapper_elt.className   = 'wrapper';

      let hex_elt        = document.createElement('h3');
      let hexVal_elt     = document.createElement('span');
      let name_elt       = document.createElement('p');
      let rgb_elt        = document.createElement('p');
      let rgbVal_elt     = document.createElement('span');
      let cmyk_elt       = document.createElement('p');
      let cmykVal_elt    = document.createElement('span');
      let hsl_elt        = document.createElement('p');
      let hslVal_elt     = document.createElement('span');
      let pantone_elt    = document.createElement('p');
      let pantoneVal_elt = document.createElement('span');


      let hex_val     = hex;
      let name_val    = name;
      let rgb_val     = rgb.map(rr => rr.array().join(', '));
      let hsl_val     = hsl.map(rr => rr.array().join(', '));
      let cmyk_val    = cmyk;
      let pantone_val = pantone;

      if (hex_val.length === 1) {
        elt.style.backgroundColor = '#' + hex_val[0];
      } else {
        elt.style.backgroundImage = 'linear-gradient(to bottom, #' + hex_val.join(',#');
      }

      elt.style.order = builtSwatchCount;
      elt.addEventListener('mousedown', function() {
        swapping = true;
        swappingElt = elt;
      }, false);
      elt.addEventListener('mouseenter', function() {
        if (swapping) {
          swapWithElt = elt;
        }
      }, false);

      if ( name_val !== null ) {
        name_elt.innerHTML  = name_val;
      }
      hexVal_elt.innerHTML  = `#${ hex_val.join(', #') }`;
      rgb_elt.innerHTML     = 'RGB: ';
      rgbVal_elt.innerHTML  = rgb_val.join(' - ');
      hsl_elt.innerHTML     = 'HSL: ';
      hslVal_elt.innerHTML  = hsl_val.join(' - ');
      if ( cmyk !== null ) {
        cmyk_elt.innerHTML    = 'CMYK*: ';
        cmykVal_elt.innerHTML = cmyk_val;
      }
      if ( pantone !== null ) {
        pantone_elt.innerHTML    = 'Pantone: ';
        pantoneVal_elt.innerHTML = pantone_val;
      }

      if ( (hsl.reduce((acc, curr) => acc + curr.l, 0) / hsl.length) < 45 ) {
        elt.style.color = 'white';
      }

      hex_elt.setAttribute(     'data-clipboard-text', '#' + hex_val.join(',#') );
      name_elt.setAttribute(    'data-clipboard-text', colourName(name_val, hex_val, hex_val.length > 1));
      rgb_elt.setAttribute(     'data-clipboard-text', 'rgb(' + rgb_val.join('),rgb(') + ')' );
      hsl_elt.setAttribute(     'data-clipboard-text', 'hsl(' + hsl_val.join('),hsl(') + ')' );
      cmyk_elt.setAttribute(    'data-clipboard-text', cmyk_val );
      pantone_elt.setAttribute( 'data-clipboard-text', pantone_val );

      hex_elt.className =
      name_elt.className =
      rgb_elt.className =
      hsl_elt.className =
      cmyk_elt.className =
      pantone_elt.className = 'data';

      constrain_elt.appendChild( sizer_elt );
      sizer_elt.appendChild( wrapper_elt );
      hex_elt.appendChild( hexVal_elt );
      wrapper_elt.appendChild( hex_elt );
      wrapper_elt.appendChild( name_elt );
      rgb_elt.appendChild( rgbVal_elt );
      wrapper_elt.appendChild( rgb_elt );
      hsl_elt.appendChild( hslVal_elt );
      wrapper_elt.appendChild( hsl_elt );
      cmyk_elt.appendChild( cmykVal_elt );
      wrapper_elt.appendChild( cmyk_elt );
      pantone_elt.appendChild( pantoneVal_elt );
      wrapper_elt.appendChild( pantone_elt );
      elt.appendChild( constrain_elt );

      elt.addEventListener('click', e => {
        let target = e.target;
        while (target !== document.body && !target.getAttribute('data-clipboard-text')) {
          target = target.parentNode;
        }

        if (target === document.body) { return; }

        let text = target.getAttribute('data-clipboard-text');
        copy_input_elt.style.display = 'block';
        try {
          copy_input_elt.value = text;
          copy_input_elt.select();
          var worked = document.execCommand('copy');
          if (!worked) { return new Error(); }
          displayModal(text);
        } catch (e) {
          prompt('Press ctrl-c to copy', text);
        }
        copy_input_elt.style.display = 'none';
      });

      colourElts.push(elt);
    }


    function HSV(h, s, v) {
      if (h <= 0) { h = 0; }
      if (s <= 0) { s = 0; }
      if (v <= 0) { v = 0; }

      if (h > 360) { h = 360; }
      if (s > 100) { s = 100; }
      if (v > 100) { v = 100; }

      this.h = h;
      this.s = s;
      this.v = v;
      this.array = function() {
        return [this.h, this.s, this.v]
      }
    }

    function HSL(h, s, l) {
      if (h <= 0) { h = 0; }
      if (s <= 0) { s = 0; }
      if (l <= 0) { l = 0; }

      if (h > 360) { h = 360; }
      if (s > 100) { s = 100; }
      if (l > 100) { l = 100; }

      this.h = h;
      this.s = s;
      this.l = l;
      this.array = function() {
        return [this.h, this.s, this.l]
      }
    }

    function RGB(r, g, b) {
      if (r <= 0) { r = 0; }
      if (g <= 0) { g = 0; }
      if (b <= 0) { b = 0; }

      if (r > 255) { r = 255; }
      if (g > 255) { g = 255; }
      if (b > 255) { b = 255; }

      this.r = +r;
      this.g = +g;
      this.b = +b;
      this.array = function() {
        return [this.r, this.g, this.b]
      }
    }

    function CMYK(c, m, y, k) {
      if (c <= 0) { c = 0; }
      if (m <= 0) { m = 0; }
      if (y <= 0) { y = 0; }
      if (k <= 0) { k = 0; }

      if (c > 100) { c = 100; }
      if (m > 100) { m = 100; }
      if (y > 100) { y = 100; }
      if (k > 100) { k = 100; }

      this.c = c;
      this.m = m;
      this.y = y;
      this.k = k;
      this.array = function() {
        return [this.c, this.m, this.y, this.k ]
      }
    }

    function colourName (clrName, clrHex, isGradient) {
      let clr = clrName ?
          clrName.trim().replace(/ /g, '-').toLowerCase() :
          clrHex.trim().replace(/ /g, '-').toLowerCase();
      for(let i = 0; i < colourNames.length; ++i) {
        if (clr.indexOf(colourNames[i]) > -1) {
          return `$${clr}`;
        }
      }

      return `$${ isGradient ? 'lg' : 'c' }-${ clr }`;
    }


    function toRGB   (HEX) {
      let result = new RGB(0, 0, 0);
      let parts = HEX.match(/[0-9a-f]{2}/gi).length === 3 ?
        HEX.match(/[0-9a-f]{2}/gi) :
        HEX.match(/[0-9a-f]/gi);

      parts.forEach(function(part, i) {
        parts[i] = parseInt(part, 16);
      });

      result.r = parts[0];
      result.g = parts[1];
      result.b = parts[2];

      return result;
    }

    function toHex (RGB) {
      let R = (+RGB.r).toString(16);
      let G = (+RGB.g).toString(16);
      let B = (+RGB.b).toString(16);
      return `${R.length === 1 ? '0' : ''}${R}${G.length === 1 ? '0' : ''}${G}${B.length === 1 ? '0' : ''}${B}`;
    }

    function toHSV   (RGB) {
      let result = new HSV(0, 0, 0);

      let r = RGB.r / 255;
      let g = RGB.g / 255;
      let b = RGB.b / 255;

      let minVal = Math.min(r, g, b);
      let maxVal = Math.max(r, g, b);
      let delta = maxVal - minVal;

      result.v = maxVal;

      if (delta == 0) {
        result.h = 0;
        result.s = 0;
      } else {
        result.s = delta / maxVal;
        let del_R = (((maxVal - r) / 6) + (delta / 2)) / delta;
        let del_G = (((maxVal - g) / 6) + (delta / 2)) / delta;
        let del_B = (((maxVal - b) / 6) + (delta / 2)) / delta;

        if (r == maxVal) { result.h = del_B - del_G; }
        else if (g == maxVal) { result.h = (1 / 3) + del_R - del_B; }
        else if (b == maxVal) { result.h = (2 / 3) + del_G - del_R; }

        if (result.h < 0) { result.h += 1; }
        if (result.h > 1) { result.h -= 1; }
      }

      result.h = Math.round(result.h * 360);
      result.s = Math.round(result.s * 100);
      result.v = Math.round(result.v * 100);

      return result;
    }

    function toHSL (RGB) {
      let result = new HSL(0, 0, 0);

      let r = RGB.r/255;
      let g = RGB.g/255;
      let b = RGB.b/255;

      let max = Math.max(r, g, b);
      let min = Math.min(r, g, b);
      let h;
      let s;
      let l = (max + min) / 2;

      if(max == min){
        h = s = 0; // achromatic
      }else{
        var d = max - min;
        s = l > 0.5 ? d / (2 - max - min) : d / (max + min);
        switch(max){
          case r: h = (g - b) / d + (g < b ? 6 : 0); break;
          case g: h = (b - r) / d + 2; break;
          case b: h = (r - g) / d + 4; break;
        }
        h /= 6;
      }

      result.h = Math.round(h*360);
      result.s = Math.round(s*100);
      result.l = Math.round(l*100);

      return result;
    }

  </script>
</body>
</html>
