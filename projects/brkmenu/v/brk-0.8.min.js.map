{"version":3,"file":"brk-0.8.min.js","sources":["../c/brk.js"],"names":["document","window","ng","module","angular","pointerover","pointerout","pointerdown","pointerup","pointercancel","isTouch","createEvent","e","directive","brkClass","controller","scope","baseClass","over","down","$scope","$element","$document","$timeout","mouseoverHandler","preventDefault","addOver","removeHover","cancel","mouseoutHandler","removeOver","mousedownHandler","addDown","on","pointerupHandler","off","removeDown","touchstartHandler","touchendHandler","setClass","which","whichTo","oldOver","state","oldDown","addClass","overDownClass","removeClass","overClass","downClass","overName","downName","element","attr","$apply","$eval","brkTouchstart","brkTouchend","undefined","factory","$filter","getNewID","type","options","o","index","IDs","length","ID","Math","random","Date","push","getIDData","i","brkID","generate","get","Menu","defaultOptions","name","title","description","url","extend","this","parent","path","route","split","level","rootName","brkMenu","root","nav","is","visible","open","links","add","addMenu","bind","remove","removeMenu","getMenu","toggle","toggleMenu","link","otherMenus","linkType","linkMenus","concat","unlink","unlinkMenus","toggleOpen","close","toggleShow","show","hide","menuToAddTo","presetOptions","addedMenu","menuSet","nameIsUnique","test","initialiseState","menu","initialStateData","initialStates","newState","linkIteration","foundState","arguments","isNumber","settings","maxLinkIterations","runLinks","menus","linkID","menuLinks","linkIDs","runLink","menuA","getOtherMenusFromLink","runOneIsLink","runOneNotLink","runOneEachLink","exactly","menuB","oneIs","oneIsnt","getMenuBFromLink","menuAIndex","indexOf","abs","checkingState","j","menuALinkIDs","menuALinkID","menuALink","menuBLinkIDs","menuBLinkID","splice","startingMenu","pathToRemove","parentMenu","removedMenuIndex","menuToRemove","pathSegment","menuFound","pathSegments","isArray","getSetStates","item","str","n","getStates","substr","setInitialMenuStates","menuPath","initialState","setInitial","ROTR","x","Σ0","Σ1","σ0","σ1","Ch","y","z","Maj","toHexStr","v","s","toString","utf8Encode","unescape","encodeURIComponent","filter","msg","K","H","String","fromCharCode","l","N","ceil","M","Array","charCodeAt","pow","floor","a","b","c","d","f","g","h","W","t","T1","T2"],"mappings":"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","sourcesContent":["(function( document, window, ng, undefined ){'use strict';\n\n\nng.module('brk', []);\n\n\n})( document, window, angular );\n(function( document, window, ng, undefined ){\n'use strict';\n\nvar pointerover;\nvar pointerout;\nvar pointerdown;\nvar pointerup;\nvar pointercancel;\n\nvar isTouch = (function () {\n\ttry {\n\t\tdocument.createEvent( 'TouchEvent' );\n\n\t\tpointerover\t\t= 'touchstart';\n\t\tpointerout\t\t= 'touchend';\n\t\tpointerdown\t\t= 'touchstart';\n\t\tpointerup\t\t= 'touchend';\n\t\tpointercancel\t= 'touchcancel';\n\t\treturn true;\n\n\t} catch (e) {\n\t\tpointerover\t\t= 'mouseover';\n\t\tpointerout\t\t= 'mouseout';\n\t\tpointerdown\t\t= 'mousedown';\n\t\tpointerup\t\t= 'mouseup';\n\t\tpointercancel\t= 'mouseup';\n\t\treturn false;\n\t}\n}());\n\n\n\n\n\nng.module('brk')\n\n.directive( 'brkClass', [function(){\n\tvar brkClass = {};\n\n\tbrkClass.controller = 'BrkClassController';\n\tbrkClass.scope = {\n\t\t'baseClass': '@brkClass',\n\t\t'over': '@?',\n\t\t'down': '@?'\n\t}\n\n\treturn brkClass;\n}])\n\n.controller( 'BrkClassController', [ '$scope', '$element', '$document', '$timeout',\n\tfunction( $scope, $element, $document, $timeout ){\n\n\t//\tWhen a pointerover happens,\n\t//\t\tcheck if the class tried to be removed.\n\t//\tIf it did, cancel the removal.\n\t//\tWhen a pointerout happens,\n\t//\t\tadd a small delay before removing the class.\n\t//\t\tthis is to allow the pointerover to\n\t//\t\tcancel the class removal\n\t//\tThese events do nothing on mobile:\n\t//\t\teverything is delegated to pointer down\n\tfunction mouseoverHandler ( e ) {\n\t\te.preventDefault();\n\n\t\taddOver();\n\t\tif ( removeHover ) {\n\t\t\t$timeout.cancel( removeHover );\n\t\t\tremoveHover = false;\n\t\t}\n\t}\n\tfunction mouseoutHandler ( e ) {\n\t\tremoveHover = $timeout( removeOver, 4 );\n\t}\n\n\t//\tOn mobile we add hover and pointerdown states\n\t//\t\ton touchstart, removing both on touchend\n\tfunction mousedownHandler ( e ) {\n\t\te.preventDefault();\n\n\t\taddDown();\n\t\tif ( isTouch ) {\n\t\t\taddOver();\n\t\t\t$element.on( pointerup, pointerupHandler );\n\t\t\t$element.on( pointercancel, pointerupHandler );\n\n\t\t} else {\n\t\t\t$document.on( pointerup, pointerupHandler );\n\t\t}\n\n\t}\n\tfunction pointerupHandler ( e ) {\n\t\tif ( isTouch ) {\n\t\t\t$element.off( pointerup, pointerupHandler );\n\t\t\t$element.off( pointercancel, pointerupHandler );\n\t\t\tremoveOver();\n\n\t\t} else {\n\t\t\t$document.off( pointerup, pointerupHandler );\n\t\t}\n\n\t\tremoveDown();\n\t}\n\n\t//\tOn mobile we add hover and pointerdown states\n\t//\t\ton touchstart, removing both on touchend\n\tfunction touchstartHandler ( e ) {\n\t\te.preventDefault();\n\n\t\taddDown();\n\t\taddOver();\n\n\t}\n\tfunction touchendHandler ( e ) {\n\t\tremoveOver();\n\t\tremoveDown();\n\t}\n\n\t//\tAdd the '--over' class\n\tfunction addOver () {\n\t\tsetClass( 'over', true );\n\t}\n\t//\tRemove the '--over' class\n\tfunction removeOver () {\n\t\tsetClass( 'over', false );\n\t}\n\t//\tAdd the '--active' class\n\tfunction addDown () {\n\t\tsetClass( 'down', true );\n\t}\n\t//\tRemove the '--active' class\n\tfunction removeDown () {\n\t\tsetClass( 'down', false );\n\t}\n\n\tfunction setClass ( which, whichTo ) {\n\t\tvar oldOver = state.over;\n\t\tvar oldDown = state.down;\n\t\tstate[ which ] = whichTo;\n\n\t\t//\tSorting the '--overdown' class\n\t\tif ( state.over && state.down ) {\n\t\t\tif ( !oldOver || !oldDown ) {\n\t\t\t\t$element.addClass( overDownClass );\n\t\t\t}\n\t\t} else {\n\t\t\tif ( oldOver && oldDown ) {\n\t\t\t\t$element.removeClass( overDownClass );\n\t\t\t}\n\t\t}\n\n\t\t//\tSorting the '--over' class\n\t\tif ( state.over ) {\n\t\t\tif ( !oldOver ) {\n\t\t\t\t$element.addClass( overClass );\n\t\t\t}\n\t\t} else {\n\t\t\tif ( oldOver ) {\n\t\t\t\t$element.removeClass( overClass );\n\t\t\t}\n\t\t}\n\n\t\t//\tSorting the '--down' class\n\t\tif ( state.down ) {\n\t\t\tif ( !oldDown ) {\n\t\t\t\t$element.addClass( downClass );\n\t\t\t}\n\t\t} else {\n\t\t\tif ( oldDown ) {\n\t\t\t\t$element.removeClass( downClass );\n\t\t\t}\n\t\t}\n\t}\n\n\tvar overName = $scope.over || 'over';\n\tvar downName = $scope.down || 'down';\n\tvar baseClass = $scope.baseClass;\n\tvar overClass = baseClass + '--' + overName;\n\tvar downClass = baseClass + '--' + downName;\n\tvar overDownClass = baseClass + '--' + overName + downName;\n\tvar removeHover = false;\n\tvar state = {\n\t\tover: false,\n\t\tdown: false\n\t};\n\n\t$element.addClass( $scope.baseClass );\n\n\t//if ( isTouch ) {\n\t\t$element.on( 'touchstart', touchstartHandler );\n\t\t$element.on( 'touchend', touchendHandler );\n\t\t$element.on( 'touchcancel', touchendHandler );\n\t//} else {\n\t\t$element.on( 'mouseover', mouseoverHandler );\n\t\t$element.on( 'mouseout', mouseoutHandler );\n\t\t$element.on( 'mousedown', mousedownHandler );\n\t//}\n\n}])\n\n.directive('brkTouchstart', [function() {\n    return function(scope, element, attr) {\n\n        element.on('touchstart', function(event) {\n            scope.$apply(function() {\n                scope.$eval(attr.brkTouchstart);\n            });\n        });\n    };\n}]).directive('brkTouchend', [function() {\n    return function(scope, element, attr) {\n\n        element.on('touchend', function(event) {\n            scope.$apply(function() {\n                scope.$eval(attr.brkTouchend);\n            });\n        });\n    };\n}]);\n\n\n\n})( document, window, angular );\n(function( document, window, ng, undefined ){'use strict';\n\n\n\nng.module('brk')\n\n.factory('brkID', [ '$filter', function( $filter ){\n\t//\tMemo the last created ID.\n\t//\tI don't think incrementing an ID from\n\t//\t\t0 will ever be an issue.\n\t//\tThat said, I will try not to make anything\n\t//\t\tdepend on a zero-based ID system as I\n\t//\t\tmay change this to a hash ID system later.\n\tfunction getNewID ( type, options ) {\n\t\tvar o = options || {};\n\t\to.type = type || '';\n\t\to.index = IDs.length;\n\t\to.ID = $filter( 'brkSha256' )( o.type + '_' + o.index + '_' + Math.random() + '_' + (+new Date()) );\n\n\t\tIDs.push( o );\n\n\t\treturn ( o.ID );\n\t}\n\n\tfunction getIDData ( ID ) {\n\t\tvar i = 0;\n\n\t\tfor (; i<IDs.length; i+=1 ) {\n\t\t\tif ( IDs[i].ID === ID ) {\n\t\t\t\treturn IDs[ i ];\n\t\t\t}\n\t\t}\n\n\t\treturn undefined;\n\t}\n\n\n\n\tvar brkID = {};\n\tvar IDs = [];\n\n\n\n\tbrkID.generate = getNewID;\n\tbrkID.get = getIDData;\n\n\n\n\treturn brkID;\n\n\t//\tDepends on:\n\t//\t -\tbrkSha256\n}]);\n\n\n\n})( document, window, angular );\n(function( document, window, ng, undefined ){'use strict';\n\nng.module('brk')\n\n.factory('brkMenu', [ 'brkID', function( brkID ){\n\n\n\tfunction Menu ( options ) {\n\t\tvar defaultOptions = {\n\t\t\tname\t\t:\t'',\n\t\t\ttitle\t\t:\t'',\n\t\t\tdescription\t:\t'',\n\t\t\turl\t\t\t:\t''\n\t\t}\n\t\tvar\to = ng.extend( {}, defaultOptions, options );\n\n\n\t\t/*\t\tUseful Properties\t\t*/\n\t\tthis.parent\t\t\t=\to.parent;\n\t\tthis.ID\t\t\t\t=\tbrkID.generate( 'brkMenu' );\n\t\tthis.name\t\t\t=\to.name;\n\t\tthis.path\t\t\t=\to.path;\n\t\tthis.route\t\t\t=\to.path.split('/');\n\t\tthis.level\t\t\t=\tthis.route.length;\n\t\tthis.rootName\t\t=\tthis.level > 1 ?\n\t\t\t\t\t\t\t\t\tbrkMenu.get( this.route[0] ) :\n\t\t\t\t\t\t\t\t\tthis;\n\t\tthis.root\t\t\t=\tbrkMenu.get( this.route[0] ) || this;\n\t\tthis.nav\t\t\t=\t[];\n\t\tthis.is = {\n\t\t\tvisible:\ttypeof o.visible === 'boolean' ?\n\t\t\t\to.visible :\n\t\t\t\ttrue,\n\n\t\t\topen:\t\ttypeof o.open === 'boolean' ?\n\t\t\t\to.open :\n\t\t\t\tfalse\n\t\t};\n\t\tthis.links = {};\n\n\t\t/*\t\tText only Properties\t\t*/\n\t\tthis.title\t\t\t=\to.title;\n\t\tthis.description\t=\to.description;\n\t\tthis.url\t\t\t=\to.url;\n\n\n\t\t/*\t\tMethods\t\t*/\n\t\tthis.add\t\t=\taddMenu.bind( undefined, this );\n\t\tthis.remove\t\t=\tremoveMenu.bind( undefined, this );\n\t\tthis.get\t\t=\tgetMenu.bind( undefined, this );\n\t\tthis.toggle\t\t=\ttoggleMenu.bind( undefined, this );\n\t\tthis.link\t\t=\tfunction ( otherMenus, linkType, state ) {\n\t\t\tlinkMenus( [this].concat( otherMenus ), linkType, state );\n\t\t};\n\t\tthis.unlink\t\t=\tunlinkMenus.bind( undefined, this);\n\n\t\t/*\t\tContrived Methods\t\t*/\n\t\tthis.toggleOpen\t=\ttoggleMenu.bind( undefined, this, 'open' );\n\t\tthis.open\t\t=\ttoggleMenu.bind( undefined, this, 'open', true );\n\t\tthis.close\t\t=\ttoggleMenu.bind( undefined, this, 'open', false );\n\n\t\tthis.toggleShow\t=\ttoggleMenu.bind( undefined, this, 'visible' );\n\t\tthis.show\t\t=\ttoggleMenu.bind( undefined, this, 'visible', true );\n\t\tthis.hide\t\t=\ttoggleMenu.bind( undefined, this, 'visible', false );\n\n\t}\n\n\n\tfunction addMenu ( menuToAddTo, options ) {\n\t\t//\tThe reason the menuToAddTo parameter has been\n\t\t//\t\tadded is to hopefully make this function\n\t\t//\t\tmore modular/testable.\n\t\tvar defaultOptions\t=\t{ name: '' };\n\t\tvar menuSet\t\t\t=\tmenuToAddTo.nav;\n\t\tvar nameIsUnique\t=\ttrue;\n\t\tvar i;\n\t\tvar o;\n\t\tvar presetOptions;\n\t\tvar addedMenu;\n\n\t\tif ( !/\\//.test( options.name ) ) {\n\t\t\to\t\t\t\t=\tng.extend( defaultOptions, options );\n\t\t\tpresetOptions\t=\t{\n\t\t\t\tpath: menuToAddTo.path ?\n\t\t\t\t\tmenuToAddTo.path + '/' + o.name :\n\t\t\t\t\to.name,\n\t\t\t\tparent: menuToAddTo\n\t\t\t}\n\t\t\tng.extend( o, presetOptions );\n\n\t\t\t//\tWe need to list through the siblings\n\t\t\t//\t\tin order to find out if this name is\n\t\t\t//\t\tunique. We don't add it if it's not.\n\t\t\tfor ( i = 0; i < menuSet.length; i += 1 ) {\n\t\t\t\tif ( menuSet[i].name === o.name ) {\n\t\t\t\t\tnameIsUnique = false;\n\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t//\tSee? Won't add it.\n\t\t\tif ( nameIsUnique ) {\n\t\t\t\taddedMenu = new Menu(o);\n\t\t\t\tinitialiseState( addedMenu );\n\n\t\t\t\tmenuSet.push( addedMenu );\n\t\t\t}\n\t\t}\n\n\n\t\t//\tReturn the original menu to allow chaining\n\t\treturn menuToAddTo;\n\n\t}\n\n\tfunction initialiseState ( menu ) {\n\t\tvar initialStateData = initialStates[ menu.path ];\n\t\tvar i;\n\n\t\tif ( initialStateData ) {\n\t\t\t//\tCheck initial states object\n\t\t\t//\t\tto see if this menu needs initialising\n\t\t\tfor ( i in initialStateData ) {\n\t\t\t\tmenu.toggle( i, initialStateData[i] );\n\t\t\t}\n\t\t\t//\tNo longer needed\n\t\t\tdelete initialStates[ menu.path ];\n\t\t}\n\t}\n\n\n\tfunction toggleMenu ( menu, state ) {\n\t\tvar oldState\t=\tmenu.is[ state ];\n\t\tvar newState;\n\t\tvar foundState\t=\tfalse;\n\n\t\tvar linkIteration;\n\t\tvar i = 0;\n\n\t\tfor (; i<arguments.length; i+=1 ) {\n\t\t\tif ( typeof arguments[i] === 'boolean' ) {\n\t\t\t\tnewState = arguments[i];\n\t\t\t\tfoundState = true;\n\t\t\t}\n\t\t\tif ( ng.isNumber( arguments[i] ) ) {\n\t\t\t\tlinkIteration = arguments[i];\n\t\t\t}\n\t\t}\n\n\t\tif ( !foundState ) {\n\t\t\tnewState = !menu.is[ state ] ;\n\t\t}\n\n\t\tlinkIteration = linkIteration || 0;\n\n\t\tif ( linkIteration < settings.maxLinkIterations ) {\n\t\t\tmenu.is[ state ] = newState;\n\t\t\trunLinks( menu, state );\n\t\t}\n\n\t\treturn menu;\n\t}\n\n\n\tfunction linkMenus ( menus, linkType, state ) {\n\t\tvar linkID = brkID.generate( 'brkMenu__link' );\n\t\tvar link;\n\t\tvar i = 0;\n\n\t\tlinkID = brkID.generate( 'brkMenu__link' );\n\t\tlink = {\n\t\t\tmenus: menus,\n\t\t\tstate: state,\n\t\t\ttype: linkType\n\t\t};\n\n\t\tfor (; i<menus.length; i+=1 ) {\n\t\t\tmenus[i].links[ state ] = menus[i].links[ state ] || [];\n\t\t\tmenus[i].links[ state ].push( linkID );\n\t\t}\n\n\t\tmenuLinks[ linkID ] = link;\n\n\t\treturn menus[0];\n\t}\n\n\n\tfunction runLinks ( menu, state, linkIteration ) {\n\t\tvar i\t\t\t=\t0;\n\t\tvar linkIDs\t\t=\tmenu.links[ state ];\n\t\tvar linkID;\n\n\t\tif ( linkIDs && linkIDs.length ) {\n\t\t\tfor (; i<linkIDs.length; i+=1 ) {\n\t\t\t\tlinkID = linkIDs[i];\n\n\t\t\t\trunLink( menu, linkID, linkIteration );\n\t\t\t}\n\t\t}\n\t}\n\n\n\tfunction runLink ( menuA, linkID, linkIteration ) {\n\t\tvar link = menuLinks[ linkID ];\n\t\tmenuA = menuA || link[ menus ][0];\n\t\tvar otherMenus = getOtherMenusFromLink( menuA, link );\n\n\t\tswitch ( link.type ) {\n\t\t\tcase 'exactly one is':\n\t\t\t\trunOneIsLink( menuA, otherMenus, link, linkIteration, true );\n\t\t\t\tbreak;\n\n\t\t\tcase 'one is':\n\t\t\t\trunOneIsLink( menuA, otherMenus, link, linkIteration );\n\t\t\t\tbreak;\n\n\t\t\tcase 'exactly one not':\n\t\t\t\trunOneNotLink( menuA, otherMenus, link, linkIteration, true );\n\t\t\t\tbreak;\n\n\t\t\tcase 'one not':\n\t\t\t\trunOneNotLink( menuA, otherMenus, link, linkIteration );\n\t\t\t\tbreak;\n\n\t\t\tcase 'one each':\n\t\t\t\trunOneEachLink( menuA, otherMenus, link, linkIteration );\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\treturn brkMenu;\n\t\t}\n\t}\n\tfunction runOneIsLink ( menuA, otherMenus, link, linkIteration, exactly ) {\n\t\tvar menuB;\n\t\tvar i;\n\t\tvar state = link.state;\n\t\tvar oneIs = false;\n\n\t\texactly = typeof exactly === 'boolean' ?\n\t\t\texactly :\n\t\t\tfalse;\n\n\t\tif ( menuA.is[ state ] ) {\n\t\t\tfor ( i=0; i<otherMenus.length; i+=1 ) {\n\t\t\t\tmenuB = otherMenus[i];\n\n\t\t\t\tif ( menuB.is[ state ] ) {\n\t\t\t\t\tmenuB.toggle( state, linkIteration+1, false );\n\t\t\t\t}\n\t\t\t}\n\n\t\t} else {\n\t\t\tfor ( i=0; i<otherMenus.length; i+=1 ) {\n\t\t\t\tmenuB = otherMenus[i];\n\n\t\t\t\tif ( menuB.is[ state ] ) {\n\t\t\t\t\tif ( oneIs ) {\n\t\t\t\t\t\tmenuB.toggle( state, linkIteration+1, false );\n\t\t\t\t\t} else {\n\t\t\t\t\t\toneIs = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ( exactly && !oneIs ) {\n\t\t\t\tmenuA.toggle( state, linkIteration+1, true );\n\t\t\t}\n\t\t}\n\t}\n\tfunction runOneNotLink ( menuA, otherMenus, link, linkIteration, exactly ) {\n\t\tvar menuB;\n\t\tvar i;\n\t\tvar state = link.state;\n\t\tvar oneIsnt = false;\n\n\t\texactly = typeof exactly === 'boolean' ?\n\t\t\texactly :\n\t\t\tfalse;\n\n\t\tif ( !menuA.is[ state ] ) {\n\t\t\tfor ( i = 0; i<otherMenus.length; i+=1 ) {\n\t\t\t\tmenuB = otherMenus[i];\n\n\t\t\t\tif ( !menuB.is[ state ] ) {\n\t\t\t\t\tmenuB.toggle( state, linkIteration+1, true );\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tfor ( i=0; i<otherMenus.length; i+=1 ) {\n\t\t\t\tmenuB = otherMenus[i];\n\n\t\t\t\tif ( !menuB.is[ state ] ) {\n\t\t\t\t\tif ( oneIsnt ) {\n\t\t\t\t\t\tmenuB.toggle( state, linkIteration+1, true );\n\t\t\t\t\t} else {\n\t\t\t\t\t\toneIsnt = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ( exactly && !oneIsnt ) {\n\t\t\t\tmenuA.toggle( state, linkIteration+1, false );\n\t\t\t}\n\t\t}\n\t}\n\tfunction runOneEachLink ( menuA, otherMenus, link, linkIteration ) {\n\t\tif ( menuA.is[ link.state ] === menuB.is[ link.state ] ) {\n\t\t\tmenuB.toggle( link.state, linkIteration+1 );\n\t\t}\n\t}\n\n\tfunction getMenuBFromLink ( menuA, link ) {\n\t\tvar menuAIndex = link.menus.indexOf( menuA );\n\t\tvar menuB = link.menus[ Math.abs( menuAIndex-1 ) ];\n\n\t\treturn menuB;\n\t}\n\tfunction getOtherMenusFromLink ( menuA, link ) {\n\t\tvar otherMenus\t= [];\n\t\tvar i = 0;\n\n\t\tfor (; i<link.menus.length; i+=1 ) {\n\t\t\tif ( link.menus[i] !== menuA ) {\n\t\t\t\totherMenus.push( link.menus[i] );\n\t\t\t}\n\t\t}\n\n\t\treturn otherMenus;\n\t}\n\n\n\tfunction unlinkMenus ( menuA ) {\n\t\tvar menuB, checkingState, i, j;\n\t\tvar menuALinkIDs, menuALinkID, menuALink;\n\t\tvar menuBLinkIDs, menuBLinkID;\n\t\tvar linkIndex;\n\n\t\tfor ( checkingState in menuA.links ) {\n\t\t\tmenuALinkIDs = menuA.links[ checkingState ];\n\n\t\t\tfor ( i = menuALinkIDs.length-1; i >= 0; i-=1 ) {\n\t\t\t\tmenuALinkID = menuALinkIDs[i];\n\t\t\t\tmenuALink = menuLinks[ menuALinkID ];\n\t\t\t\tmenuB = getMenuBFromLink( menuA, menuALink );\n\t\t\t\tmenuBLinkIDs = menuB.links[ checkingState ];\n\n\t\t\t\tfor ( j = menuBLinkIDs.length-1; j >= 0; j-=1 ) {\n\t\t\t\t\tmenuBLinkID = menuB.links[ checkingState ][j];\n\n\t\t\t\t\tif ( menuBLinkID === menuALinkID ) {\n\t\t\t\t\t\tmenuBLinkIDs.splice( j, 1 );\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tdelete menuLinks[ menuALinkID ];\n\t\t\t}\n\n\t\t\tdelete menuA.links[ checkingState ];\n\t\t}\n\n\t\treturn menuA;\n\t}\n\n\n\tfunction removeMenu ( startingMenu, pathToRemove ) {\n\t\t//\tWe allow a name or a path to be passed.\n\t\t//\tSo I have to find the item that needs to be removed\n\t\t//\t\tthen take its parent, to find where to remove it\n\t\tvar menuToRemove\t\t=\tgetMenu( startingMenu, pathToRemove );\n\t\tvar parentMenu;\n\t\tvar removedMenuIndex;\n\n\t\tif ( menuToRemove ) {\n\t\t\tparentMenu\t\t\t=\tmenuToRemove.parent;\n\t\t\tremovedMenuIndex\t=\tparentMenu.nav.indexOf( menuToRemove );\n\n\t\t\t//\tIf the item exists, remove it\n\t\t\tif ( removedMenuIndex >= 0 ) {\n\t\t\t\t//\tUnlinking the menu removes some hanging objects,\n\t\t\t\t//\t\tpreventing some memory leaks... I hope.\n\t\t\t\tunlinkMenus( menuToRemove );\n\t\t\t\tparentMenu.nav.splice( removedMenuIndex, 1 );\n\t\t\t}\n\t\t}\n\n\t\t//\tReturn the original menu to allow chaining\n\t\treturn startingMenu;\n\n\t}\n\n\n\tfunction getMenu ( startingMenu, path ) {\n\n\t\tvar pathSegments\t=\tng.isArray( path ) ?\n\t\t\t\tpath :\n\t\t\t\tpath.split('/') || [];\n\t\tvar pathSegment;\n\t\tvar i, j;\n\t\tvar menu;\n\t\tvar menuFound;\n\t\tvar menuSet\t=\tstartingMenu.nav;\n\n\t\t//\tWe'll loop through the path segments, checking\n\t\t//\t\tthat each one exists. Once we reach the last\n\t\t//\t\tpathSegment and it exists, we can return the\n\t\t//\t\tmenu with that name.\n\t\t//\tIf any one doesn't exist, we return undefined instead\n\t\tfor ( i = 0; i < pathSegments.length; i+=1 ) {\n\t\t\tj\t\t\t=\t0;\n\t\t\tpathSegment\t=\tpathSegments[i];\n\t\t\tmenuFound\t=\tfalse;\n\n\t\t\tfor ( j = 0; j < menuSet.length; j+=1 ) {\n\t\t\t\tmenu = menuSet[j];\n\n\t\t\t\tif ( pathSegment === menu.name ) {\n\t\t\t\t\tmenuSet\t\t=\tmenu.nav;\n\t\t\t\t\tmenuFound\t=\ttrue;\n\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ( !menuFound ) {\n\t\t\t\t//\tReturn undefined if the menu isn't found\n\t\t\t\t//\tTODO: I want a better way of handling this?\n\t\t\t\treturn undefined;\n\t\t\t\t//\tMaybe:\n\t\t\t\t//\treturn emptyMenu;\n\t\t\t}\n\t\t}\n\n\n\t\t//\tReturn the found menu\n\t\treturn menu;\n\n\t}\n\n\tfunction getSetStates ( state, nav ) {\n\t\tvar i = 0;\n\t\tvar str = '';\n\t\tvar strLength;\n\t\tvar n = nav || brkMenu.nav;\n\t\tvar item;\n\n\t\tfor (; i<n.length; i+=1 ) {\n\t\t\titem = n[i];\n\t\t\tstr += item.is[ state ] ? item.path + '//' : '';\n\n\t\t\tif ( item.nav.length > 0 ) {\n\t\t\t\tstr += getSetStates( state, item.nav );\n\t\t\t}\n\t\t}\n\n\t\treturn str;\n\t}\n\n\tfunction getStates ( state, nav ) {\n\t\tvar str = getSetStates( state, nav );\n\n\t\treturn str.substr( 0, str.length-2 );\n\t}\n\n\tfunction setInitialMenuStates ( state, menus ) {\n\t\tvar menuPath;\n\t\tvar initialState;\n\t\tvar initialStatesSet;\n\n\t\tfor ( menuPath in menus ) {\n\t\t\tinitialState = menus[ menuPath ];\n\n\t\t\tinitialStates[ menuPath ] = initialStates[ menuPath ] || {};\n\t\t\tinitialStates[ menuPath ][ state ] = initialState;\n\t\t}\n\n\t\treturn brkMenu;\n\t}\n\n\n\n\n\n\tvar brkMenu\t\t=\t{};\n\tvar menus\t\t=\t[];\n\tvar settings\t=\t{\n\t\tmaxLinkIterations:\t3\n\t};\n\tvar menuLinks\t\t=\t{};\n\tvar initialStates\t=\t{};\n\t//\tCould possibly be a better option than returning\n\t//\t\tundefined in some places? The name can be checked,\n\t//\t\tbut it may help prevent some errors.\n\t//var emptyMenu\t=\tnew Menu({ name: '[EMPTY]' });\n\n\n\n\n\n\tbrkMenu.nav\t\t=\tmenus;\n\n\t//\tMocking brkMenu to be a demi-menu itself\n\tbrkMenu.add\t\t=\taddMenu.bind( undefined, brkMenu );\n\tbrkMenu.remove\t=\tremoveMenu.bind( undefined, brkMenu );\n\tbrkMenu.get\t\t=\tgetMenu.bind( undefined, brkMenu );\n\n\t//\tInternal functions\n\tbrkMenu.linkMenus\t=\tlinkMenus;\n\tbrkMenu.addMenu\t\t=\taddMenu;\n\tbrkMenu.removeMenu\t=\tremoveMenu;\n\tbrkMenu.getMenu\t\t=\tgetMenu;\n\n\tbrkMenu.getStates\t=\tgetStates;\n\tbrkMenu.setInitial\t=\tsetInitialMenuStates;\n\n\n\n\n\n\treturn brkMenu;\n\n\t//\tDepends on:\n\t//\t -\tbrkID\n}]);\n\n\n\n})( document, window, angular );\n(function( document, window, ng, undefined ){'use strict';\n\n\n\n/* - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  */\n/*  SHA-256 implementation in JavaScript                (c) Chris Veness 2002-2014 / MIT Licence  */\n/*                                                                                                */\n/*  - see https://www.movable-type.co.uk/scripts/sha256.html\n/*\n/* - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  */\n/*\tMany comments removed and code simplified for brevity\n/*\tPlease see the URL above for original code\n/* - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  */\n\nfunction ROTR (n, x) {\n\treturn (x >>> n) | (x << (32-n));\n};\n\nfunction Σ0 (x) { return ROTR(2,  x) ^ ROTR(13, x) ^ ROTR(22, x); };\nfunction Σ1 (x) { return ROTR(6,  x) ^ ROTR(11, x) ^ ROTR(25, x); };\nfunction σ0 (x) { return ROTR(7,  x) ^ ROTR(18, x) ^ (x>>>3);  };\nfunction σ1 (x) { return ROTR(17, x) ^ ROTR(19, x) ^ (x>>>10); };\nfunction Ch (x, y, z) { return (x & y) ^ (~x & z); };\nfunction Maj (x, y, z) { return (x & y) ^ (x & z) ^ (y & z); };\n\nfunction toHexStr (n) {\n\tvar s=\"\", v;\n\tfor (var i=7; i>=0; i--) { v = (n>>>(i*4)) & 0xf; s += v.toString(16); }\n\treturn s;\n};\n\nfunction utf8Encode ( str ) {\n\treturn unescape( encodeURIComponent( str ) );\n};\n\n/*\tI don't think this is used?\nfunction utf8Decode ( str ) {\n\ttry {\n\t\treturn decodeURIComponent( escape( str ) );\n\t} catch (e) {\n\t\treturn str;\n\t}\n};\n*/\n\n\n\nng.module('brk')\n\n.filter( 'brkSha256', [function () {\n\n\treturn function hash ( msg ) {\n\t\tmsg = utf8Encode( msg );\n\n\t\tvar K = [\n\t\t\t0x428a2f98, 0x71374491, 0xb5c0fbcf, 0xe9b5dba5, 0x3956c25b, 0x59f111f1, 0x923f82a4, 0xab1c5ed5,\n\t\t\t0xd807aa98, 0x12835b01, 0x243185be, 0x550c7dc3, 0x72be5d74, 0x80deb1fe, 0x9bdc06a7, 0xc19bf174,\n\t\t\t0xe49b69c1, 0xefbe4786, 0x0fc19dc6, 0x240ca1cc, 0x2de92c6f, 0x4a7484aa, 0x5cb0a9dc, 0x76f988da,\n\t\t\t0x983e5152, 0xa831c66d, 0xb00327c8, 0xbf597fc7, 0xc6e00bf3, 0xd5a79147, 0x06ca6351, 0x14292967,\n\t\t\t0x27b70a85, 0x2e1b2138, 0x4d2c6dfc, 0x53380d13, 0x650a7354, 0x766a0abb, 0x81c2c92e, 0x92722c85,\n\t\t\t0xa2bfe8a1, 0xa81a664b, 0xc24b8b70, 0xc76c51a3, 0xd192e819, 0xd6990624, 0xf40e3585, 0x106aa070,\n\t\t\t0x19a4c116, 0x1e376c08, 0x2748774c, 0x34b0bcb5, 0x391c0cb3, 0x4ed8aa4a, 0x5b9cca4f, 0x682e6ff3,\n\t\t\t0x748f82ee, 0x78a5636f, 0x84c87814, 0x8cc70208, 0x90befffa, 0xa4506ceb, 0xbef9a3f7, 0xc67178f2 ];\n\n\t\tvar H = [\n\t\t\t0x6a09e667, 0xbb67ae85, 0x3c6ef372, 0xa54ff53a, 0x510e527f, 0x9b05688c, 0x1f83d9ab, 0x5be0cd19 ];\n\n\t\tmsg += String.fromCharCode(0x80);\n\n\t\tvar l = msg.length/4 + 2;\n\t\tvar N = Math.ceil(l/16);\n\t\tvar M = new Array(N);\n\n\t\tfor (var i=0; i<N; i++) {\n\t\t\tM[i] = new Array(16);\n\t\t\tfor (var j=0; j<16; j++) {\n\t\t\t\tM[i][j] = (msg.charCodeAt(i*64+j*4)<<24) | (msg.charCodeAt(i*64+j*4+1)<<16) |\n\t\t\t\t\t\t  (msg.charCodeAt(i*64+j*4+2)<<8) | (msg.charCodeAt(i*64+j*4+3));\n\t\t\t}\n\t\t}\n\n\t\tM[N-1][14] = ((msg.length-1)*8) / Math.pow(2, 32); M[N-1][14] = Math.floor(M[N-1][14]);\n\t\tM[N-1][15] = ((msg.length-1)*8) & 0xffffffff;\n\n\t\tvar W = new Array(64); var a, b, c, d, e, f, g, h;\n\t\tfor (var i=0; i<N; i++) {\n\n\t\t\tfor (var t=0;  t<16; t++) W[t] = M[i][t];\n\t\t\tfor (var t=16; t<64; t++) W[t] = (σ1(W[t-2]) + W[t-7] + σ0(W[t-15]) + W[t-16]) & 0xffffffff;\n\n\t\t\ta = H[0]; b = H[1]; c = H[2]; d = H[3]; e = H[4]; f = H[5]; g = H[6]; h = H[7];\n\n\t\t\tfor (var t=0; t<64; t++) {\n\t\t\t\tvar T1 = h + Σ1(e) + Ch(e, f, g) + K[t] + W[t];\n\t\t\t\tvar T2 =     Σ0(a) + Maj(a, b, c);\n\t\t\t\th = g;\n\t\t\t\tg = f;\n\t\t\t\tf = e;\n\t\t\t\te = (d + T1) & 0xffffffff;\n\t\t\t\td = c;\n\t\t\t\tc = b;\n\t\t\t\tb = a;\n\t\t\t\ta = (T1 + T2) & 0xffffffff;\n\t\t\t}\n\n\t\t\tH[0] = (H[0]+a) & 0xffffffff;\n\t\t\tH[1] = (H[1]+b) & 0xffffffff;\n\t\t\tH[2] = (H[2]+c) & 0xffffffff;\n\t\t\tH[3] = (H[3]+d) & 0xffffffff;\n\t\t\tH[4] = (H[4]+e) & 0xffffffff;\n\t\t\tH[5] = (H[5]+f) & 0xffffffff;\n\t\t\tH[6] = (H[6]+g) & 0xffffffff;\n\t\t\tH[7] = (H[7]+h) & 0xffffffff;\n\t\t}\n\n\t\treturn toHexStr(H[0]) + toHexStr(H[1]) + toHexStr(H[2]) + toHexStr(H[3]) +\n\t\t\t   toHexStr(H[4]) + toHexStr(H[5]) + toHexStr(H[6]) + toHexStr(H[7]);\n\t};\n}]);\n\n\n\n})( document, window, angular );"]}
