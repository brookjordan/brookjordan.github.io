<meta name="viewport" content="width=device-width, initial-scale=1"><style>html, body{margin: 0;}.grid{display: flex; width: 100vw; height: 100vh;}.col{display: flex; flex-direction: column; flex-grow: 1;}.row{position: relative; flex-grow: 1;}canvas{display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%;}</style><form id="image-form"> <input type='file' id="image-select"/></form><div id="grid" class="grid"> <div class="col"> <div class="row"></div><div class="row"></div><div class="row"></div><div class="row"></div></div><div class="col"> <div class="row"></div><div class="row"></div><div class="row"></div><div class="row"></div></div><div class="col"> <div class="row"></div><div class="row"></div><div class="row"></div><div class="row"></div></div><div class="col"> <div class="row"></div><div class="row"></div><div class="row"></div><div class="row"></div></div></div><script>var d=document.getElementById("image-select"),e=Array.from(document.querySelectorAll(".row")),f=Array.from(document.querySelectorAll(".col")),g;g=Array(16);g.fill(0);g=g.map(function(){return document.createElement("canvas")});g.forEach(function(a,b){e[b].appendChild(a)});g=g.map(function(a){return a.getContext("2d")});d.addEventListener("change",h);function k(a){a.preventDefault();if(a.touches){var b=a.touches[0].pageX;var c=a.touches[0].pageY}else b=a.pageX,c=a.pageY;b=2*(.5-b/innerWidth);c=2*(.5-c/innerHeight);e.forEach(function(a,b){a.style.flexGrow=Math.pow(Math.pow(b%4+1,c), 2)});f.forEach(function(a,c){a.style.flexGrow=Math.pow(Math.pow(c+1,b), 2)})}function h(){var a,b;m().then(function(b){a=b;return n(a)}).then(function(a){b=a;canvasWidth=Math.floor(b.naturalWidth/4);canvasHeight=Math.floor(b.naturalHeight/4);g.forEach(function(a,c){var l=Math.floor(c/4);a.canvas.width=canvasWidth;a.canvas.height=canvasHeight;a.drawImage(b,-l*canvasWidth,c%4*-canvasHeight)});document.querySelector("form").parentNode.removeChild(document.querySelector("form"));window.onmousemove=k;window.ontouchmove=k})}function m(){return new Promise(function(a,b){if(d.files&&d.files[0]){var c=new FileReader;c.onload=function(b){a(b.target.result)};c.readAsDataURL(d.files[0])}else b("Inputs not found.")})}function n(a){return new Promise(function(b){var c=new Image;c.onload=function(){b(c)};c.src=a})};</script>
